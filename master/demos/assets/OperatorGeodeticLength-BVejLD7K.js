import{d5 as h,d6 as S}from"./main-asQ7SttR.js";import{P,j as G,a as d,f as E,d as v}from"./Transformation2D-DZfKTQC6.js";import{w}from"./OperatorShapePreservingLength-B29UqzQn.js";import{a4 as T,N as L,o as C,p as X,a5 as D,a6 as N,m as Y,J as b,K as j,L as q}from"./ProjectionTransformation-BC2Deuzc.js";import"./preload-helper-ExcqyqRp.js";import"./SimpleGeometryCursor-B92kdZ15.js";class V{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(t,r,l){return!1}canAccelerateGeometry(t){return!1}execute(t,r,l,a){if(l===4)return new w().execute(t,r,a);if(r.getCoordinateSystemType()===0&&P(""),G(t),t.isEmpty()||t.getDimension()<1)return 0;const s=r.getGCS(),n=q();s.querySpheroidData(n);const c=n.majorSemiAxis,u=n.e2,m=s.getUnit().getUnitToBaseFactor();let e;const o=t.getGeometryType();if(o===d.enumPolygon?e=t.getBoundary():o===d.enumEnvelope?e=T(t):E(o)?(e=new L({vd:t.getDescription()}),e.addSegment(t,!0)):e=t,e.hasNonLinearSegments()&&(e=new C().execute(e,0,r.getTolerance(0),0,a)),s!==r){const i=r.getSRToGCSTransform();if(r.isPannable()){e=X(e,r),o===d.enumPolyline&&e===t&&(e=t.clone());const y=new v;r.getPannableExtent().queryIntervalX(y);for(let g=0,f=e.getPointCount();g<f;g++){const p=e.getXY(g);p.x=D(p.x,y),e.setXY(g,p)}}const x=e.createInstance();e=N(i,e,x,a)?x:new Y().execute(e,i,a)}return this._ExecuteMultiPathGeodeticLength(e,l,c,u,m)}_ExecuteMultiPathGeodeticLength(t,r,l,a,s){const n={stack:[],error:void 0,hasError:!1};try{const c=h(n,new b,!1);let u=0;const m=t.querySegmentIterator();for(;m.nextPath();)for(;m.hasNextSegment();){const e=m.nextSegment(),o=e.getStartXY(),i=e.getEndXY();o.scale(s),i.scale(s),j.geodeticDistance(l,a,o.x,o.y,i.x,i.y,c,null,null,r),u+=c.val}return u}catch(c){n.error=c,n.hasError=!0}finally{S(n)}}}export{V as OperatorGeodeticLength};
