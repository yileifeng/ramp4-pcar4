{"version":3,"file":"cutOperator-xvXoiSsc.js","sources":["../../node_modules/@arcgis/core/chunks/OperatorCut.js","../../node_modules/@arcgis/core/geometry/operators/gx/operatorCut.js","../../node_modules/@arcgis/core/chunks/cutOperator.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{G as t}from\"./SimpleGeometryCursor.js\";import{G as e,c as s,g as r}from\"./Geometry.js\";import{P as n,a as o,E as m,n as i}from\"./QuadraticBezier.js\";import{g as u,a as c}from\"./Envelope.js\";import{T as a,s as h,k as l,l as d,m as y,C as p}from\"./ProjectionTransformation.js\";var _=p;function g(t,e){return{m_geometry:t,m_side:e}}function f(t,e,s,r,n,o){if(e.isEmpty()){const t=g(e,0);return void n.push(t)}if(s.isEmpty()){const t=g(e,0);return void n.push(t)}const i=[],u=new m;{const m=u.createGeometryUserIndex(),c=u.addGeometry(e),p=u.addGeometry(s),f=new a(o);let C=0,E=null;if(u.hasCurves()){E=new _;const t=u.getEnvelope2D(o);C=h(r.total());const e=l(r.total(),t);d(u,e,r.total(),12e3,E,null,o)}u.dbgVerifyCurves(),f.setEditShapeCrackAndCluster(u,r),f.cut(t,m,c,p,i);for(const t of i){null!==E&&E.stitchCurves(u,t,C,!1);const e=g(u.getGeometry(t),y(u.getGeometryUserIndex(t,m)));n.push(e)}null!==E&&E.clearStitcher(u)}}function C(t,e,s,r,n,u){if(e.isEmpty()){const t=g(e,0);return void n.push(t)}if(s.isEmpty()){const t=g(e,0);return void n.push(t)}const c=[],y=new m;{const t=y.createGeometryUserIndex(),p=y.addGeometry(e),f=y.addGeometry(s),C=new a(u);let E=0,G=null;if(y.hasCurves()){G=new _;const t=y.getEnvelope2D(u);E=h(r.total());const e=l(r.total(),t);d(y,e,r.total(),12e3,G,null,u)}y.dbgVerifyCurves(),C.setEditShapeCrackAndCluster(y,r),C.cut(!1,t,p,f,c),null!==G&&G.stitchCurves(y,i,E,!0);let v=y.getGeometry(p);const w=new o,x=new o,k=[];for(let e=0;e<c.length;e++){let s=null;{const n=new m,o=n.addGeometry(v),a=n.addGeometry(y.getGeometry(c[e]));if(n.hasCurves()){const t=n.getEnvelope2D(u);E=h(r.total());const e=l(r.total(),t);d(n,e,r.total(),12e3,G,null,u)}C.setEditShapeCrackAndCluster(n,r);const p=C.intersection(o,a);if(null!==G&&G.stitchCurves(n,i,E,!0),s=n.getGeometry(p),s.isEmpty())continue;const _=y.getGeometryUserIndex(c[e],t);2===_?w.add(s,!1):1===_?x.add(s,!1):k.push(s)}{const t=new m,s=t.addGeometry(v),n=t.addGeometry(y.getGeometry(c[e]));if(t.hasCurves()){const e=t.getEnvelope2D(u);E=h(r.total());const s=l(r.total(),e);d(t,s,r.total(),12e3,G,null,u)}C.setEditShapeCrackAndCluster(t,r);const o=C.difference(s,n);null!==G&&G.stitchCurves(t,i,E,!0);v=t.getGeometry(o)}}if(!v.isEmpty()&&c.length>0&&k.push(v),w.isEmpty()&&x.isEmpty())return;if(!w.isEmpty()){const t=g(w,1);n.push(t)}if(!x.isEmpty()){const t=g(x,2);n.push(t)}for(let e=0,s=k.length;e<s;++e){const t=g(k[e],3);n.push(t)}}}class E{getOperatorType(){return 10005}accelerateGeometry(t,e,s){return!1}canAccelerateGeometry(t){return!1}supportsCurves(){return!0}execute(t,e,s,r,n){return new G(t,e,s,r,n)}}class G extends t{constructor(t,e,s,r,o){super(),this.m_cutIndex=-1,this.m_cuts=[],this.m_progressTracker=o,this.m_cuttee=e.clone(),this.m_cutter=new n({copy:s}),this.m_bConsiderTouch=t;const m=u(e,s);this.m_tolerance=c(r,m,!0)}next(){return-1===this.m_cutIndex&&this.generateCuts(),++this.m_cutIndex<this.m_cuts.length?this.m_cuts[this.m_cutIndex]:null}getGeometryID(){return this.m_cutIndex}tock(){return!0}getRank(){return 1}generateCuts(){switch(this.m_cuttee.getGeometryType()){case e.enumPolyline:this.generatePolylineCuts();break;case e.enumPolygon:this.generatePolygonCuts()}}generatePolylineCuts(){const t=new n,e=new n,r=new n;this.m_cuts.length=0,this.m_cuts.push(t),this.m_cuts.push(e);const o=[];f(this.m_bConsiderTouch,this.m_cuttee,this.m_cutter,this.m_tolerance,o,this.m_progressTracker);for(let n=0;n<o.length;n++){const m=o[n];1===m.m_side?t.add(m.m_geometry,!1):2===m.m_side||4===m.m_side?e.add(m.m_geometry,!1):3===m.m_side?this.m_cuts.push(m.m_geometry):0===m.m_side?r.add(m.m_geometry,!1):s(\"\")}r.isEmpty()||t.isEmpty()&&e.isEmpty()&&!(this.m_cuts.length>=3)||this.m_cuts.push(r),t.isEmpty()&&e.isEmpty()&&this.m_cuts.length<3&&(this.m_cuts.length=0)}generatePolygonCuts(){const t=new o,e=new o,n=new o;this.m_cuts.length=0,this.m_cuts.push(t),this.m_cuts.push(e);const m=[];C(this.m_bConsiderTouch,this.m_cuttee,this.m_cutter,this.m_tolerance,m,this.m_progressTracker);for(let r=0;r<m.length;r++){const o=m[r];1===o.m_side?t.add(o.m_geometry,!1):2===o.m_side?e.add(o.m_geometry,!1):3===o.m_side?this.m_cuts.push(o.m_geometry):0===o.m_side?n.add(o.m_geometry,!1):s(\"\")}r(n.isEmpty()||1===m.length),t.isEmpty()&&e.isEmpty()&&this.m_cuts.length<3&&(this.m_cuts.length=0)}}export{E as O};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{O as r}from\"../../../chunks/OperatorCut.js\";const t=new r;function n(r,n,o){const u=t.execute(!0,r,n,o,null);return Array.from(u)}function o(){return t.supportsCurves()}export{n as execute,o as supportsCurves};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{isSome as r}from\"../core/arrayUtils.js\";import{supportsCurves as e,execute as o}from\"../geometry/operators/gx/operatorCut.js\";import{getSpatialReference as t,fromSpatialReference as s,fromPolyline as p,fromGeometry as a,toGeometry as u}from\"../geometry/operators/support/apiConverter.js\";function m(e,m){const c=t(e);return o(a(e),p(m),s(c)).map((r=>u(r,c))).filter(r)}const c=e(),i=Object.freeze(Object.defineProperty({__proto__:null,execute:m,supportsCurves:c},Symbol.toStringTag,{value:\"Module\"}));export{i as c,m as e,c as s};\n"],"names":["_","p","t","f","s","r","n","o","i","u","m","c","a","C","E","h","e","l","d","y","G","v","w","x","k"],"mappings":";;;;;;AAI0R,IAAIA,IAAEC;AAAE,SAAS,EAAEC,GAAE,GAAE;AAAC,SAAM,EAAC,YAAWA,GAAE,QAAO,EAAC;AAAC;AAAC,SAASC,GAAED,GAAE,GAAEE,GAAEC,GAAEC,GAAEC,GAAE;AAAC,MAAG,EAAE,QAAO,GAAG;AAAC,UAAML,IAAE,EAAE,GAAE,CAAC;AAAE,WAAO,KAAKI,EAAE,KAAKJ,CAAC;AAAA,EAAC;AAAC,MAAGE,EAAE,QAAS,GAAC;AAAC,UAAMF,IAAE,EAAE,GAAE,CAAC;AAAE,WAAO,KAAKI,EAAE,KAAKJ,CAAC;AAAA,EAAC;AAAC,QAAMM,IAAE,IAAGC,IAAE,IAAIC;AAAE;AAAC,UAAMA,IAAED,EAAE,2BAA0BE,IAAEF,EAAE,YAAY,CAAC,GAAER,IAAEQ,EAAE,YAAYL,CAAC,GAAED,IAAE,IAAIS,EAAEL,CAAC;AAAE,QAAIM,IAAE,GAAEC,IAAE;AAAK,QAAGL,EAAE,aAAY;AAAC,MAAAK,IAAE,IAAId;AAAE,YAAME,IAAEO,EAAE,cAAcF,CAAC;AAAE,MAAAM,IAAEE,EAAEV,EAAE,MAAO,CAAA;AAAE,YAAMW,IAAEC,EAAEZ,EAAE,MAAK,GAAGH,CAAC;AAAEgB,MAAAA,EAAET,GAAEO,GAAEX,EAAE,MAAK,GAAG,MAAKS,GAAE,MAAKP,CAAC;AAAA,IAAC;AAAC,IAAAE,EAAE,gBAAe,GAAGN,EAAE,4BAA4BM,GAAEJ,CAAC,GAAEF,EAAE,IAAID,GAAEQ,GAAEC,GAAEV,GAAEO,CAAC;AAAE,eAAUN,KAAKM,GAAE;AAAC,MAAOM,MAAP,QAAUA,EAAE,aAAaL,GAAEP,GAAEW,GAAE,EAAE;AAAE,YAAMG,IAAE,EAAEP,EAAE,YAAYP,CAAC,GAAEiB,EAAEV,EAAE,qBAAqBP,GAAEQ,CAAC,CAAC,CAAC;AAAE,MAAAJ,EAAE,KAAKU,CAAC;AAAA,IAAC;AAAC,IAAOF,MAAP,QAAUA,EAAE,cAAcL,CAAC;AAAA,EAAC;AAAC;AAAC,SAASI,GAAEX,GAAE,GAAEE,GAAEC,GAAEC,GAAEG,GAAE;AAAC,MAAG,EAAE,WAAU;AAAC,UAAMP,IAAE,EAAE,GAAE,CAAC;AAAE,WAAO,KAAKI,EAAE,KAAKJ,CAAC;AAAA,EAAC;AAAC,MAAGE,EAAE,QAAO,GAAG;AAAC,UAAMF,IAAE,EAAE,GAAE,CAAC;AAAE,WAAO,KAAKI,EAAE,KAAKJ,CAAC;AAAA,EAAC;AAAC,QAAMS,IAAE,CAAE,GAACQ,IAAE,IAAIT;AAAE;AAAC,UAAMR,IAAEiB,EAAE,wBAAyB,GAAClB,IAAEkB,EAAE,YAAY,CAAC,GAAEhB,IAAEgB,EAAE,YAAYf,CAAC,GAAES,IAAE,IAAID,EAAEH,CAAC;AAAE,QAAIK,IAAE,GAAEM,IAAE;AAAK,QAAGD,EAAE,UAAS,GAAG;AAAC,MAAAC,IAAE,IAAIpB;AAAE,YAAME,IAAEiB,EAAE,cAAcV,CAAC;AAAE,MAAAK,IAAEC,EAAEV,EAAE,OAAO;AAAE,YAAMW,IAAEC,EAAEZ,EAAE,MAAK,GAAGH,CAAC;AAAEgB,MAAAA,EAAEC,GAAEH,GAAEX,EAAE,MAAK,GAAG,MAAKe,GAAE,MAAKX,CAAC;AAAA,IAAC;AAAC,IAAAU,EAAE,gBAAiB,GAACN,EAAE,4BAA4BM,GAAEd,CAAC,GAAEQ,EAAE,IAAI,IAAGX,GAAED,GAAEE,GAAEQ,CAAC,GAASS,MAAP,QAAUA,EAAE,aAAaD,GAAEX,GAAEM,GAAE,EAAE;AAAE,QAAIO,IAAEF,EAAE,YAAYlB,CAAC;AAAE,UAAMqB,IAAE,IAAIf,KAAEgB,IAAE,IAAIhB,KAAEiB,IAAE,CAAA;AAAG,aAAQR,IAAE,GAAEA,IAAEL,EAAE,QAAOK,KAAI;AAAC,UAAIZ,IAAE;AAAK;AAAC,cAAME,IAAE,IAAII,KAAEH,IAAED,EAAE,YAAYe,CAAC,GAAET,IAAEN,EAAE,YAAYa,EAAE,YAAYR,EAAEK,CAAC,CAAC,CAAC;AAAE,YAAGV,EAAE,UAAS,GAAG;AAAC,gBAAMJ,IAAEI,EAAE,cAAcG,CAAC;AAAE,UAAAK,IAAEC,EAAEV,EAAE,MAAO,CAAA;AAAE,gBAAMW,IAAEC,EAAEZ,EAAE,MAAO,GAACH,CAAC;AAAEgB,UAAAA,EAAEZ,GAAEU,GAAEX,EAAE,MAAK,GAAG,MAAKe,GAAE,MAAKX,CAAC;AAAA,QAAC;AAAC,QAAAI,EAAE,4BAA4BP,GAAED,CAAC;AAAE,cAAMJ,IAAEY,EAAE,aAAaN,GAAEK,CAAC;AAAE,YAAUQ,MAAP,QAAUA,EAAE,aAAad,GAAEE,GAAEM,GAAE,EAAE,GAAEV,IAAEE,EAAE,YAAYL,CAAC,GAAEG,EAAE,UAAU;AAAS,cAAMJ,IAAEmB,EAAE,qBAAqBR,EAAEK,CAAC,GAAEd,CAAC;AAAE,QAAIF,MAAJ,IAAMsB,EAAE,IAAIlB,GAAE,EAAE,IAAMJ,MAAJ,IAAMuB,EAAE,IAAInB,GAAE,EAAE,IAAEoB,EAAE,KAAKpB,CAAC;AAAA,MAAC;AAAC;AAAC,cAAMF,IAAE,IAAIQ,KAAEN,IAAEF,EAAE,YAAYmB,CAAC,GAAEf,IAAEJ,EAAE,YAAYiB,EAAE,YAAYR,EAAEK,CAAC,CAAC,CAAC;AAAE,YAAGd,EAAE,aAAY;AAAC,gBAAMc,IAAEd,EAAE,cAAcO,CAAC;AAAE,UAAAK,IAAEC,EAAEV,EAAE,MAAK,CAAE;AAAE,gBAAMD,IAAEa,EAAEZ,EAAE,MAAO,GAACW,CAAC;AAAEE,UAAAA,EAAEhB,GAAEE,GAAEC,EAAE,MAAO,GAAC,MAAKe,GAAE,MAAKX,CAAC;AAAA,QAAC;AAAC,QAAAI,EAAE,4BAA4BX,GAAEG,CAAC;AAAE,cAAME,IAAEM,EAAE,WAAWT,GAAEE,CAAC;AAAE,QAAOc,MAAP,QAAUA,EAAE,aAAalB,GAAEM,GAAEM,GAAE,EAAE,GAAEO,IAAEnB,EAAE,YAAYK,CAAC;AAAA,MAAC;AAAA,IAAC;AAAC,QAAG,CAACc,EAAE,QAAO,KAAIV,EAAE,SAAO,KAAGa,EAAE,KAAKH,CAAC,GAAEC,EAAE,QAAO,KAAIC,EAAE,QAAO,EAAG;AAAO,QAAG,CAACD,EAAE,QAAS,GAAC;AAAC,YAAMpB,IAAE,EAAEoB,GAAE,CAAC;AAAE,MAAAhB,EAAE,KAAKJ,CAAC;AAAA,IAAC;AAAC,QAAG,CAACqB,EAAE,WAAU;AAAC,YAAMrB,IAAE,EAAEqB,GAAE,CAAC;AAAE,MAAAjB,EAAE,KAAKJ,CAAC;AAAA,IAAC;AAAC,aAAQc,IAAE,GAAEZ,IAAEoB,EAAE,QAAOR,IAAEZ,GAAE,EAAEY,GAAE;AAAC,YAAMd,IAAE,EAAEsB,EAAER,CAAC,GAAE,CAAC;AAAE,MAAAV,EAAE,KAAKJ,CAAC;AAAA,IAAC;AAAA,EAAC;AAAC;AAAC,MAAMY,GAAC;AAAA,EAAC,kBAAiB;AAAC,WAAO;AAAA,EAAK;AAAA,EAAC,mBAAmBZ,GAAEc,GAAEZ,GAAE;AAAC,WAAM;AAAA,EAAE;AAAA,EAAC,sBAAsBF,GAAE;AAAC,WAAM;AAAA,EAAE;AAAA,EAAC,iBAAgB;AAAC,WAAM;AAAA,EAAE;AAAA,EAAC,QAAQA,GAAEc,GAAEZ,GAAEC,GAAEC,GAAE;AAAC,WAAO,IAAIc,GAAElB,GAAEc,GAAEZ,GAAEC,GAAEC,CAAC;AAAA,EAAC;AAAC;AAAC,MAAMc,WAAUlB,EAAC;AAAA,EAAC,YAAYA,GAAEc,GAAEZ,GAAEC,GAAEE,GAAE;AAAC,UAAK,GAAG,KAAK,aAAW,IAAG,KAAK,SAAO,CAAE,GAAC,KAAK,oBAAkBA,GAAE,KAAK,WAASS,EAAE,MAAO,GAAC,KAAK,WAAS,IAAIV,EAAE,EAAC,MAAKF,EAAC,CAAC,GAAE,KAAK,mBAAiBF;AAAE,UAAMQ,IAAED,EAAEO,GAAEZ,CAAC;AAAE,SAAK,cAAYO,EAAEN,GAAEK,GAAE,EAAE;AAAA,EAAC;AAAA,EAAC,OAAM;AAAC,WAAW,KAAK,eAAV,MAAsB,KAAK,aAAc,GAAC,EAAE,KAAK,aAAW,KAAK,OAAO,SAAO,KAAK,OAAO,KAAK,UAAU,IAAE;AAAA,EAAI;AAAA,EAAC,gBAAe;AAAC,WAAO,KAAK;AAAA,EAAU;AAAA,EAAC,OAAM;AAAC,WAAM;AAAA,EAAE;AAAA,EAAC,UAAS;AAAC,WAAO;AAAA,EAAC;AAAA,EAAC,eAAc;AAAC,YAAO,KAAK,SAAS,gBAAiB,GAAA;AAAA,MAAE,KAAKM,EAAE;AAAa,aAAK,qBAAoB;AAAG;AAAA,MAAM,KAAKA,EAAE;AAAY,aAAK,oBAAqB;AAAA,IAAA;AAAA,EAAC;AAAA,EAAC,uBAAsB;AAAC,UAAMd,IAAE,IAAII,KAAEU,IAAE,IAAIV,KAAED,IAAE,IAAIC;AAAE,SAAK,OAAO,SAAO,GAAE,KAAK,OAAO,KAAKJ,CAAC,GAAE,KAAK,OAAO,KAAKc,CAAC;AAAE,UAAMT,IAAE,CAAA;AAAG,IAAAJ,GAAE,KAAK,kBAAiB,KAAK,UAAS,KAAK,UAAS,KAAK,aAAYI,GAAE,KAAK,iBAAiB;AAAE,aAAQD,IAAE,GAAEA,IAAEC,EAAE,QAAOD,KAAI;AAAC,YAAMI,IAAEH,EAAED,CAAC;AAAE,MAAII,EAAE,WAAN,IAAaR,EAAE,IAAIQ,EAAE,YAAW,EAAE,IAAMA,EAAE,WAAN,KAAkBA,EAAE,WAAN,IAAaM,EAAE,IAAIN,EAAE,YAAW,EAAE,IAAMA,EAAE,WAAN,IAAa,KAAK,OAAO,KAAKA,EAAE,UAAU,IAAMA,EAAE,WAAN,IAAaL,EAAE,IAAIK,EAAE,YAAW,EAAE,IAAEN,EAAE,EAAE;AAAA,IAAC;AAAC,IAAAC,EAAE,QAAO,KAAIH,EAAE,aAAWc,EAAE,QAAS,KAAE,EAAE,KAAK,OAAO,UAAQ,MAAI,KAAK,OAAO,KAAKX,CAAC,GAAEH,EAAE,QAAS,KAAEc,EAAE,QAAO,KAAI,KAAK,OAAO,SAAO,MAAI,KAAK,OAAO,SAAO;AAAA,EAAE;AAAA,EAAC,sBAAqB;AAAC,UAAMd,IAAE,IAAIK,KAAES,IAAE,IAAIT,KAAED,IAAE,IAAIC;AAAE,SAAK,OAAO,SAAO,GAAE,KAAK,OAAO,KAAKL,CAAC,GAAE,KAAK,OAAO,KAAKc,CAAC;AAAE,UAAM,IAAE,CAAA;AAAG,IAAAH,GAAE,KAAK,kBAAiB,KAAK,UAAS,KAAK,UAAS,KAAK,aAAY,GAAE,KAAK,iBAAiB;AAAE,aAAQ,IAAE,GAAE,IAAE,EAAE,QAAO,KAAI;AAAC,YAAMN,IAAE,EAAE,CAAC;AAAE,MAAIA,EAAE,WAAN,IAAaL,EAAE,IAAIK,EAAE,YAAW,EAAE,IAAMA,EAAE,WAAN,IAAaS,EAAE,IAAIT,EAAE,YAAW,EAAE,IAAMA,EAAE,WAAN,IAAa,KAAK,OAAO,KAAKA,EAAE,UAAU,IAAMA,EAAE,WAAN,IAAaD,EAAE,IAAIC,EAAE,YAAW,EAAE,IAAEH,EAAE,EAAE;AAAA,IAAC;AAACC,IAAAA,EAAEC,EAAE,QAAS,KAAM,EAAE,WAAN,CAAY,GAAEJ,EAAE,QAAS,KAAEc,EAAE,QAAS,KAAE,KAAK,OAAO,SAAO,MAAI,KAAK,OAAO,SAAO;AAAA,EAAE;AAAC;ACAxpI,MAAMd,IAAE,IAAIG;AAAE,SAASC,GAAED,GAAEC,GAAE,GAAE;AAAC,QAAMG,IAAEP,EAAE,QAAQ,IAAGG,GAAEC,GAAE,GAAE,IAAI;AAAE,SAAO,MAAM,KAAKG,CAAC;AAAC;AAAC,SAASF,KAAG;AAAC,SAAOL,EAAE,eAAgB;AAAA;ACAwH,SAASQ,EAAEM,GAAEN,GAAE;AAAC,QAAMC,IAAET,EAAEc,CAAC;AAAE,SAAOT,GAAEK,EAAEI,CAAC,GAAEf,EAAES,CAAC,GAAEN,EAAEO,CAAC,CAAC,EAAE,IAAK,CAAAN,MAAGI,EAAEJ,GAAEM,CAAC,CAAC,EAAG,OAAON,CAAC;AAAC;AAAM,MAACM,IAAEK,GAAC,GAAGR,KAAE,OAAO,OAAO,OAAO,eAAe,EAAC,WAAU,MAAK,SAAQE,GAAE,gBAAeC,EAAC,GAAE,OAAO,aAAY,EAAC,OAAM,SAAQ,CAAC,CAAC;;;;;","x_google_ignoreList":[0,1,2]}