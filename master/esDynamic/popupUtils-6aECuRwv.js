import{b7 as u,b8 as f,b9 as b,ba as m,bb as d,bc as p,bd as g,be as F,bf as y}from"./main-BC8gbEPx.js";function w({displayField:e,editFieldsInfo:t,fields:i,objectIdField:n,title:s},a){if(!i)return null;const l=C({editFieldsInfo:t,fields:i,objectIdField:n},a);if(!l.length)return null;const r=D({titleBase:s,fields:i,displayField:e}),o=h();return new u({title:r,content:o,fieldInfos:l})}function L(e){const{title:t,graphic:i}=e??{},{attributes:n,sourceLayer:s}=i??{},a=s&&"displayField"in s?s.displayField:null,l=a?n?.[a]:null,r=l!=null?JSON.stringify(l):null,o=i?.getObjectId()?.toString();return t||r||o||""}const v=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):y(e,t);function I({fields:e,ignoreFieldTypes:t,sortDisabled:i}){const n=e;return t&&(e=e.filter(s=>!t.includes(s.type))),e===n&&(e=e.slice()),i!==!0&&e.sort(N),e}function N(e,t){return e.type==="oid"?-1:t.type==="oid"?1:c(e)?-1:c(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function C(e,t){const i=t?.visibleFieldNames;return I({fields:e.fields??[],ignoreFieldTypes:t?.ignoreFieldTypes||T,sortDisabled:t?.sortDisabled}).map(n=>new f({fieldName:n.name,isEditable:b(n,e),label:n.alias,format:S(n),visible:v(n,{...e,visibleFieldNames:i})}))}function S(e){switch(e.type){case"small-integer":case"integer":case"single":return new d({digitSeparator:!0,places:0});case"double":return new d({digitSeparator:!0,places:2});case"string":return m(e.name)?new d({digitSeparator:!0,places:0}):void 0;default:return}}function h(){return[new p,new g]}function D(e){const t=F(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i??""}function c(e){return(e.name&&e.name.toLowerCase())==="name"?!0:e.alias?.toLowerCase()==="name"}const T=["geometry","blob","raster","guid","xml"];export{L as c,w as p};
