{"version":3,"file":"DefaultLayouts-BVa8JdAK.js","sources":["../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ModelDirtyTypes.js","../../node_modules/@arcgis/core/views/3d/terrain/interfaces.js","../../node_modules/@arcgis/core/views/3d/terrain/Overlay.js","../../node_modules/@arcgis/core/views/3d/terrain/OverlayContent.js","../../node_modules/@arcgis/core/views/3d/terrain/OverlayFramebufferObject.js","../../node_modules/@arcgis/core/views/3d/terrain/OverlayRenderTargets.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/renderPasses/RenderPassIdentifier.js","../../node_modules/@arcgis/core/views/3d/environment/Clouds.js","../../node_modules/@arcgis/core/views/3d/environment/CloudyWeather.js","../../node_modules/@arcgis/core/views/3d/environment/FoggyWeather.js","../../node_modules/@arcgis/core/views/3d/environment/RainyWeather.js","../../node_modules/@arcgis/core/views/3d/environment/SnowyWeather.js","../../node_modules/@arcgis/core/views/3d/environment/SunnyWeather.js","../../node_modules/@arcgis/core/views/3d/environment/weather.js","../../node_modules/@arcgis/core/views/3d/environment/CloudsParameters.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/TextureCubeBindUniform.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/CloudsParallaxShading.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/terrain/Overlay.glsl.js","../../node_modules/@arcgis/core/chunks/TextureOnly.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Integer2PassUniform.js","../../node_modules/@arcgis/core/chunks/HighlightDownsample.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/HighlightCellGridScreenSpacePass.glsl.js","../../node_modules/@arcgis/core/chunks/HighlightApply.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/effects/highlight/HighlightApplyTechnique.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/effects/highlight/HighlightDownsampleTechnique.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/effects/highlight/HighlightPassParameters.js","../../node_modules/@arcgis/core/chunks/HighlightToSingle.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/effects/highlight/HighlightToSingleTechnique.js","../../node_modules/@arcgis/core/chunks/SingleHighlightApply.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/effects/highlight/SingleHighlightApplyTechnique.js","../../node_modules/@arcgis/core/chunks/SingleHighlightBlur.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/effects/highlight/SingleHighlightBlurTechnique.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexBufferLayouts.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/effects/highlight/Highlight.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterialRepository.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Update.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/BindParameters.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderContext.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/CascadeCamera.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ShadowMap.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextureTechnique.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextureTechniqueConfiguration.js","../../node_modules/@arcgis/core/chunks/OverlayCompositing.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/OverlayCompositingTechnique.js","../../node_modules/@arcgis/core/views/3d/terrain/OverlayRenderer.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderGeometry.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/TriangleMaterial.js","../../node_modules/@arcgis/core/chunks/ColorMaterial.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ColorMaterialTechnique.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ColorMaterialTechniqueConfiguration.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ColorMaterial.js","../../node_modules/@arcgis/core/layers/graphics/sources/interfaces.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/lineStippleUtils.js","../../node_modules/@arcgis/core/views/3d/support/engineContent/line.js","../../node_modules/@arcgis/core/views/3d/support/renderInfoUtils/line.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultLayouts.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nvar E,I;!function(E){E[E.ADD=0]=\"ADD\",E[E.UPDATE=1]=\"UPDATE\",E[E.REMOVE=2]=\"REMOVE\"}(E||(E={})),function(E){E[E.NONE=0]=\"NONE\",E[E.VISIBILITY=1]=\"VISIBILITY\",E[E.GEOMETRY=2]=\"GEOMETRY\",E[E.TRANSFORMATION=4]=\"TRANSFORMATION\",E[E.HIGHLIGHT=8]=\"HIGHLIGHT\",E[E.OCCLUDEE=16]=\"OCCLUDEE\"}(I||(I={}));export{E as DirtyOperation,I as DirtyState};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nvar E,A,O;!function(E){E[E.INNER=0]=\"INNER\",E[E.OUTER=1]=\"OUTER\"}(E||(E={})),function(E){E[E.REGULAR=0]=\"REGULAR\",E[E.HAS_NORTH_POLE=1]=\"HAS_NORTH_POLE\",E[E.HAS_SOUTH_POLE=2]=\"HAS_SOUTH_POLE\",E[E.HAS_BOTH_POLES=3]=\"HAS_BOTH_POLES\"}(A||(A={})),function(E){E[E.FADING=0]=\"FADING\",E[E.IMMEDIATE=1]=\"IMMEDIATE\",E[E.UNFADED=2]=\"UNFADED\"}(O||(O={}));export{E as OverlayIndex,A as PatchType,O as TextureUpdate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{create as e,offset as t,copy as s}from\"../../../geometry/support/aaBoundingRect.js\";import{fromValues as i}from\"../webgl-engine/lib/LocalOriginFactory.js\";class n{constructor(){this._extent=e(),this.resolution=0,this.renderLocalOrigin=i(0,0,0,\"O\"),this.pixelRatio=1,this.mapUnitsPerPixel=1,this.canvasGeometries=new r}get extent(){return this._extent}setupGeometryViewsCyclical(e){this.setupGeometryView();const s=.001*e.range;if(this._extent[0]-s<=e.min){const s=this.canvasGeometries.extents[this.canvasGeometries.numViews++];t(this._extent,e.range,0,s)}if(this._extent[2]+s>=e.max){const s=this.canvasGeometries.extents[this.canvasGeometries.numViews++];t(this._extent,-e.range,0,s)}}setupGeometryView(){this.canvasGeometries.numViews=1,s(this.canvasGeometries.extents[0],this._extent)}hasSomeSizedView(){for(let e=0;e<this.canvasGeometries.numViews;e++){const t=this.canvasGeometries.extents[e];if(t[0]!==t[2]&&t[1]!==t[3])return!0}return!1}}class r{constructor(){this.extents=[e(),e(),e()],this.numViews=0}}export{n as Overlay};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nvar o;!function(o){o[o.Color=0]=\"Color\",o[o.ColorNoRasterImage=1]=\"ColorNoRasterImage\",o[o.Highlight=2]=\"Highlight\",o[o.WaterNormal=3]=\"WaterNormal\",o[o.Occluded=4]=\"Occluded\",o[o.ObjectAndLayerIdColor=5]=\"ObjectAndLayerIdColor\"}(o||(o={}));export{o as OverlayContent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{releaseMaybe as e}from\"../../../core/maybe.js\";class t{constructor(e,t,h){this._fbos=e,this._format=t,this._name=h}get valid(){return null!=this._handle?.getTexture()}dispose(){this._handle=e(this._handle)}get texture(){return this._handle?.getTexture()}bind(e,t,h){this._handle&&this._handle.fbo?.width===t&&this._handle.fbo?.height===h||(this._handle?.release(),this._handle=this._fbos.acquire(t,h,this._name,this._format)),e.bindFramebuffer(this._handle?.fbo)}generateMipMap(){this._handle?.getTexture()?.descriptor?.hasMipmap&&this._handle?.getTexture()?.generateMipmap()}}export{t as OverlayFramebufferObject};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{OverlayContent as e}from\"./OverlayContent.js\";import{OverlayFramebufferObject as r}from\"./OverlayFramebufferObject.js\";import{ColorFormat as o}from\"../webgl/formats.js\";import{ShaderOutput as t}from\"../webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{olidEnabled as l}from\"../webgl-engine/effects/geometry/olidUtils.js\";class s{constructor(e,t,l,s,i=o.RGBA_MIPMAP){this.output=l,this.content=s,this.fbo=new r(e,i,t)}get valid(){return this.fbo.valid}}class i{constructor(r){this.targets=[new s(r,\"overlay color\",t.Color,e.Color),new s(r,\"overlay IM color\",t.Color,e.ColorNoRasterImage),new s(r,\"overlay highlight\",t.Highlight,e.Highlight,o.RG),new s(r,\"overlay water\",t.Normal,e.WaterNormal),new s(r,\"overlay occluded\",t.Color,e.Occluded)],l()&&this.targets.push(new s(r,\"overlay olid\",t.ObjectAndLayerIdColor,e.ObjectAndLayerIdColor,o.RGBA))}getTexture(e){return this.targets[e]?.fbo.texture}dispose(){for(const e of this.targets)e.fbo.dispose()}computeValidity(){return this.targets.reduce(((e,r,o)=>r.valid?e|=1<<o:e),0)}}export{i as OverlayRenderTargets,s as RenderTargetDescriptor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nvar a;!function(a){a[a.Material=0]=\"Material\",a[a.ShadowMap=1]=\"ShadowMap\",a[a.Highlight=2]=\"Highlight\",a[a.ViewshedShadowMap=3]=\"ViewshedShadowMap\"}(a||(a={}));export{a as RenderPassIdentifier};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nvar n,e;function d(n){return null!=n&&!n.running}!function(n){n[n.Idle=0]=\"Idle\",n[n.Rendering=1]=\"Rendering\",n[n.Ready=2]=\"Ready\",n[n.Fading=3]=\"Fading\"}(n||(n={})),function(n){n[n.RG=0]=\"RG\",n[n.BA=1]=\"BA\",n[n.COUNT=2]=\"COUNT\"}(e||(e={}));export{e as CloudsTextureChannels,n as CubeMapState,d as ensureClouds};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/JSONSupport.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{enumeration as s}from\"../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";var c;let p=c=class extends r{constructor(o){super(o),this.type=\"cloudy\",this.cloudCover=.5}clone(){return new c({cloudCover:this.cloudCover})}};o([s({cloudy:\"cloudy\"}),e({json:{write:{isRequired:!0}}})],p.prototype,\"type\",void 0),o([e({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p.prototype,\"cloudCover\",void 0),p=c=o([t(\"esri.views.3d.environment.CloudyWeather\")],p);const i=p;export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/JSONSupport.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{enumeration as t}from\"../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";var p;let c=p=class extends r{constructor(o){super(o),this.type=\"foggy\",this.fogStrength=.5}clone(){return new p({fogStrength:this.fogStrength})}};o([t({foggy:\"foggy\"}),e({json:{write:{isRequired:!0}}})],c.prototype,\"type\",void 0),o([e({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,\"fogStrength\",void 0),c=p=o([s(\"esri.views.3d.environment.FoggyWeather\")],c);const i=c;export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/JSONSupport.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{enumeration as t}from\"../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";var s;let p=s=class extends r{constructor(o){super(o),this.type=\"rainy\",this.cloudCover=.5,this.precipitation=.5}clone(){return new s({cloudCover:this.cloudCover,precipitation:this.precipitation})}};o([t({rainy:\"rainy\"}),e({json:{write:{isRequired:!0}}})],p.prototype,\"type\",void 0),o([e({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p.prototype,\"cloudCover\",void 0),o([e({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p.prototype,\"precipitation\",void 0),p=s=o([i(\"esri.views.3d.environment.RainyWeather\")],p);const n=p;export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/JSONSupport.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{enumeration as t}from\"../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";var i;let p=i=class extends r{constructor(o){super(o),this.type=\"snowy\",this.cloudCover=.5,this.precipitation=.5,this.snowCover=\"disabled\"}clone(){return new i({cloudCover:this.cloudCover,precipitation:this.precipitation,snowCover:this.snowCover})}};o([t({snowy:\"snowy\"}),e({json:{write:{isRequired:!0}}})],p.prototype,\"type\",void 0),o([e({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p.prototype,\"cloudCover\",void 0),o([e({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p.prototype,\"precipitation\",void 0),o([e({type:[\"enabled\",\"disabled\"],nonNullable:!0,json:{write:!0}})],p.prototype,\"snowCover\",void 0),p=i=o([s(\"esri.views.3d.environment.SnowyWeather\")],p);const n=p;export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/JSONSupport.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{enumeration as s}from\"../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";var c;let n=c=class extends r{constructor(o){super(o),this.type=\"sunny\",this.cloudCover=.5}clone(){return new c({cloudCover:this.cloudCover})}};o([s({sunny:\"sunny\"}),e({json:{write:{isRequired:!0}}})],n.prototype,\"type\",void 0),o([e({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],n.prototype,\"cloudCover\",void 0),n=c=o([t(\"esri.views.3d.environment.SunnyWeather\")],n);const p=n;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"./CloudyWeather.js\";import r from\"./FoggyWeather.js\";import o from\"./RainyWeather.js\";import t from\"./SnowyWeather.js\";import y from\"./SunnyWeather.js\";const n={key:\"type\",base:y,typeMap:{sunny:y,cloudy:e,rainy:o,snowy:t,foggy:r}},a=Object.keys(n.typeMap);function s(e,r){return!!a.includes(e)||(r.error(`\"${e}\" is not a valid weather type`),!1)}const p=1e4,i=1e5;export{i as cloudsHeight,p as heightLimit,s as validateWeatherType,n as weatherTypes,a as weatherTypesArray};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{neverReached as a}from\"../../../core/compilerUtils.js\";import{clamp as t}from\"../../../core/mathUtils.js\";import{signal as e}from\"../../../core/signal.js\";import{rotate as s}from\"../../../core/libs/gl-matrix-2/math/mat4.js\";import{IDENTITY as i,create as r}from\"../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{k as h,n as o,h as n,c,l as d,d as l}from\"../../../chunks/vec32.js\";import{create as _,fromValues as u}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as F,fromPoints as f,axis as p}from\"../../../geometry/support/axisAngleDegrees.js\";import{earth as S}from\"../../../geometry/support/Ellipsoid.js\";import{CloudsTextureChannels as m,ensureClouds as E,CubeMapState as D}from\"./Clouds.js\";import{heightLimit as P}from\"./weather.js\";class x{constructor(){this.startTime=0,this._data=e(null),this._readChannels=m.RG,this.parallax=new O,this.parallaxNew=new O,this._anchorPoint=_(),this._fadeState=e(A.HIDE),this._fadeFactor=e(1)}get data(){return this._data.value}set data(a){this._data.value=a}get readChannels(){return this._readChannels}get fadeState(){return this._fadeState.value}get fadeFactor(){return this._fadeFactor.value}get opacity(){switch(this.fadeState){case A.HIDE:return 0;case A.FADE_OUT:return 1-this.fadeFactor;case A.FADE_IN:return this.fadeFactor;case A.SHOW:case A.CROSS_FADE:return 1}}fade(a,e,s){this.isFading&&this.fadeFactor<1&&(this._fadeFactor.value=s?t((e-this.startTime)/(H*s),0,1):1,1===this.fadeFactor&&this._endFade()),this._evaluateState(a,e),this._updateParallax(a)}_evaluateState(a,t){const e=a.relativeElevation,s=this._updateAnchorPoint(a);(e>1.7*P||e<-1e4||s>I)&&this.opacity>0?this._startFade(A.HIDE,t):this.isFading||(e>P||e<-.35*P||s>w*I?this.opacity>0&&this._startFade(A.FADE_OUT,t):E(this.data)&&(0===this.opacity?this._startFade(A.FADE_IN,t):this.data.state===D.Ready&&(this.fadeState===A.SHOW?this._startFade(A.CROSS_FADE,t):this._startFade(A.SHOW,t))))}_updateParallax(a){const t=h(a.eye);this.parallax.radiusCurvatureCorrection=.84*Math.sqrt(Math.max(t-S.radius*S.radius,0))/Math.sqrt(t),f(C,this.parallax.anchorPoint,v),s(this.parallax.transform,i,v[3],p(v)),f(C,this.parallaxNew.anchorPoint,v),s(this.parallaxNew.transform,i,v[3],p(v))}_updateAnchorPoint(a){return o(this._anchorPoint,a.eye),n(this._anchorPoint,this._anchorPoint,S.radius),this.fadeState===A.HIDE&&this.data?.state===D.Ready?(c(this.parallax.anchorPoint,this._anchorPoint),0):d(l(g,this.parallax.anchorPoint,this._anchorPoint))}requestFade(){this._fadeFactor.value=0}_startFade(a,t){switch(this._fadeState.value=a,this.startTime=t,a){case A.CROSS_FADE:this.requestFade(),this._switchReadChannels(),c(this.parallaxNew.anchorPoint,this._anchorPoint);break;case A.FADE_IN:this.requestFade(),this._switchReadChannels(),c(this.parallax.anchorPoint,this._anchorPoint),c(this.parallaxNew.anchorPoint,this._anchorPoint);break;case A.FADE_OUT:this.requestFade();break;case A.SHOW:this._switchReadChannels(),c(this.parallax.anchorPoint,this._anchorPoint),c(this.parallaxNew.anchorPoint,this._anchorPoint),this._endFade();break;case A.HIDE:this._endFade()}}_endFade(){switch(this._fadeFactor.value=1,this.data&&this.data.state!==D.Ready&&(this.data.state=D.Idle),this.fadeState){case A.CROSS_FADE:c(this.parallax.anchorPoint,this.parallaxNew.anchorPoint),this._fadeState.value=A.SHOW;break;case A.FADE_IN:this._fadeState.value=A.SHOW;break;case A.FADE_OUT:this._fadeState.value=A.HIDE;break;case A.SHOW:case A.HIDE:break;default:a(this.fadeState)}}_switchReadChannels(){this.data?.state===D.Ready&&(this._readChannels=1-this._readChannels,this.data.state=D.Fading)}get isFading(){return this.fadeState===A.FADE_OUT||this.fadeState===A.FADE_IN||this.fadeState===A.CROSS_FADE}}var A;!function(a){a[a.HIDE=0]=\"HIDE\",a[a.FADE_IN=1]=\"FADE_IN\",a[a.SHOW=2]=\"SHOW\",a[a.CROSS_FADE=3]=\"CROSS_FADE\",a[a.FADE_OUT=4]=\"FADE_OUT\"}(A||(A={}));class O{constructor(){this.anchorPoint=_(),this.radiusCurvatureCorrection=0,this.transform=r()}}const C=u(0,0,1),v=F(),g=_(),H=1.25,w=.5,I=2e5;export{x as CloudsParameters,A as FadeState};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{BindType as e}from\"../../../../webgl/BindType.js\";import{Uniform as r}from\"../../../../webgl/Uniform.js\";class o extends r{constructor(r,o){super(r,\"samplerCube\",e.Bind,((e,s)=>e.bindTexture(r,o(s))))}}export{o as TextureCubeBindUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{fromValues as o}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{earth as t}from\"../../../../../../geometry/support/Ellipsoid.js\";import{CloudsTextureChannels as e}from\"../../../../environment/Clouds.js\";import{FadeState as a}from\"../../../../environment/CloudsParameters.js\";import{cloudsHeight as r}from\"../../../../environment/weather.js\";import{addMainLightDirection as i,addMainLightIntensity as c}from\"../shading/MainLighting.glsl.js\";import{BooleanBindUniform as d}from\"../../shaderModules/BooleanBindUniform.js\";import{Float3BindUniform as n}from\"../../shaderModules/Float3BindUniform.js\";import{FloatBindUniform as l}from\"../../shaderModules/FloatBindUniform.js\";import{glsl as s}from\"../../shaderModules/glsl.js\";import{Matrix4BindUniform as u}from\"../../shaderModules/Matrix4BindUniform.js\";import{TextureCubeBindUniform as m}from\"../../shaderModules/TextureCubeBindUniform.js\";function h(t){const r=t.fragment;r.constants.add(\"radiusCloudsSquared\",\"float\",C).code.add(s`vec3 intersectWithCloudLayer(vec3 dir, vec3 cameraPosition, vec3 spherePos) {\nfloat B = 2.0 * dot(cameraPosition, dir);\nfloat C = dot(cameraPosition, cameraPosition) - radiusCloudsSquared;\nfloat det = B * B - 4.0 * C;\nfloat pointIntDist = max(0.0, 0.5 *(-B + sqrt(det)));\nreturn (cameraPosition + dir * pointIntDist) - spherePos;\n}`),r.uniforms.add(new l(\"radiusCurvatureCorrection\",(({clouds:o})=>o.parallax.radiusCurvatureCorrection))).code.add(s`vec3 correctForPlanetCurvature(vec3 dir) {\ndir.z = dir.z * (1.0 - radiusCurvatureCorrection) + radiusCurvatureCorrection;\nreturn dir;\n}`),r.code.add(s`vec3 rotateDirectionToAnchorPoint(mat4 rotMat, vec3 inVec) {\nreturn (rotMat * vec4(inVec, 0.0)).xyz;\n}`),i(r),c(r);const h=o(.28,.175,.035);r.constants.add(\"RIM_COLOR\",\"vec3\",h);const v=.3,f=140,p=.2,g=10,w=.3;r.code.add(s`\n    vec3 calculateCloudColor(vec3 cameraPosition, vec3 worldSpaceRay, vec4 clouds) {\n      float upDotLight = dot(cameraPosition, mainLightDirection);\n      float dirDotLight = max(dot(worldSpaceRay, mainLightDirection), 0.0);\n      float sunsetTransition = clamp(pow(max(upDotLight, 0.0), ${s.float(v)}), 0.0, 1.0);\n\n      // Base color of the clouds that depends on lighting of the sun and sky\n      vec3 ambientLight = calculateAmbientIrradiance(cameraPosition,  0.0);\n      vec3 combinedLight = clamp((mainLightIntensity + ambientLight )/PI, vec3(0.0), vec3(1.0));\n      vec3 baseCloudColor = pow(combinedLight * pow(clouds.xyz, vec3(GAMMA)), vec3(INV_GAMMA));\n\n      // Rim light around the edge of the clouds simulating scattering of the direct lun light\n      float scatteringMod = max(clouds.a < 0.5 ? clouds.a / 0.5 : - clouds.a / 0.5 + 2.0, 0.0);\n      float rimLightIntensity = 0.5 + 0.5 * pow(max(upDotLight, 0.0), 0.35);\n      vec3 directSunScattering = RIM_COLOR * rimLightIntensity * (pow(dirDotLight, ${s.float(f)})) * scatteringMod;\n\n      // Brighten the clouds around the sun at the sunsets\n      float additionalLight = ${s.float(p)} * pow(dirDotLight, ${s.float(g)}) * (1. - pow(sunsetTransition, ${s.float(w)})) ;\n\n      return vec3(baseCloudColor * (1.0 + additionalLight) + directSunScattering);\n    }\n  `),r.uniforms.add(new d(\"readChannelsRG\",(o=>o.clouds.readChannels===e.RG)),new m(\"cubeMap\",(o=>o.clouds.data?.cubeMap?.colorTexture??null))).code.add(s`vec4 sampleCloud(vec3 rayDir, bool readOtherChannel) {\nvec4 s = texture(cubeMap, rayDir);\nbool readRG = readChannelsRG ^^ readOtherChannel;\ns = readRG ? vec4(vec3(s.r), s.g) : vec4(vec3(s.b), s.a);\nreturn length(s) == 0.0 ? vec4(s.rgb, 1.0) : s;\n}`),r.uniforms.add(new n(\"anchorPoint\",(o=>o.clouds.parallax.anchorPoint)),new n(\"anchorPointNew\",(o=>o.clouds.parallaxNew.anchorPoint)),new u(\"rotationClouds\",(o=>o.clouds.parallax.transform)),new u(\"rotationCloudsNew\",(o=>o.clouds.parallaxNew.transform)),new l(\"cloudsOpacity\",(o=>o.clouds.opacity)),new l(\"fadeFactor\",(o=>o.clouds.fadeFactor)),new d(\"crossFade\",(o=>o.clouds.fadeState===a.CROSS_FADE))).code.add(s`vec4 renderClouds(vec3 worldRay, vec3 cameraPosition) {\nvec3 intersectionPoint = intersectWithCloudLayer(worldRay, cameraPosition, anchorPoint);\nvec3 worldRayRotated = rotateDirectionToAnchorPoint(rotationClouds, normalize(intersectionPoint));\nvec3 worldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);\nvec4 cloudData = sampleCloud(worldRayRotatedCorrected, crossFade);\nvec3 cameraPositionN = normalize(cameraPosition);\nvec4 cloudColor = vec4(calculateCloudColor(cameraPositionN, worldRay, cloudData), cloudData.a);\nif(crossFade) {\nintersectionPoint = intersectWithCloudLayer(worldRay, cameraPosition, anchorPointNew);\nworldRayRotated = rotateDirectionToAnchorPoint(rotationCloudsNew, normalize(intersectionPoint));\nworldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);\ncloudData = sampleCloud(worldRayRotatedCorrected, false);\nvec4 cloudColorNew = vec4(calculateCloudColor(cameraPositionN, worldRay, cloudData), cloudData.a);\ncloudColor = mix(cloudColor, cloudColorNew, fadeFactor);\n}\nfloat totalTransmittance = length(cloudColor.rgb) == 0.0 ?\n1.0 :\nclamp(cloudColor.a * cloudsOpacity + (1.0 - cloudsOpacity), 0.0 , 1.0);\nreturn vec4(cloudColor.rgb, totalTransmittance);\n}`)}const C=(t.radius+r)**2;export{h as CloudsParallaxShading};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{hasArea as o,width as r,height as t}from\"../../../../../../geometry/support/aaBoundingRect.js\";import{OverlayIndex as a}from\"../../../../terrain/interfaces.js\";import{OverlayContent as l}from\"../../../../terrain/OverlayContent.js\";import{RenderPassIdentifier as i}from\"../../renderPasses/RenderPassIdentifier.js\";import{isColorOrColorEmission as n,ShaderOutput as v}from\"../ShaderOutput.js\";import{addMainLightDirection as d,addMainLightIntensity as s}from\"../shading/MainLighting.glsl.js\";import{PBRMode as c}from\"../shading/PhysicallyBasedRenderingParameters.glsl.js\";import{Water as x}from\"../shading/Water.glsl.js\";import{Float4DrawUniform as u}from\"../../shaderModules/Float4DrawUniform.js\";import{FloatPassUniform as y}from\"../../shaderModules/FloatPassUniform.js\";import{glsl as m}from\"../../shaderModules/glsl.js\";import{Texture2DPassUniform as p}from\"../../shaderModules/Texture2DPassUniform.js\";import{Uniform as f}from\"../../../../../webgl/Uniform.js\";var C;function g(e,o){const{vertex:r,fragment:t}=e;r.uniforms.add(new u(\"overlayTexOffset\",((e,o)=>b(e,o))),new u(\"overlayTexScale\",((e,o)=>V(e,o)))),t.constants.add(\"overlayOpacity\",\"float\",1),t.uniforms.add(new p(\"ovColorTex\",((e,o)=>T(e,o)))),h(e,o)}function O(e,o){const{vertex:r,fragment:t}=e;r.uniforms.add(new w(\"overlayTexOffset\"),new w(\"overlayTexScale\")),t.uniforms.add(new y(\"overlayOpacity\",(e=>e.overlayOpacity)),new p(\"ovColorTex\",((e,o)=>o.overlay?.getTexture(e.overlayContent)))),h(e,o)}function h(e,o){const r=o.pbrMode===c.Water||o.pbrMode===c.WaterOnIntegratedMesh||o.pbrMode===c.TerrainWithWater;r&&e.include(x,o);const{vertex:t,fragment:a}=e;e.varyings.add(\"vtcOverlay\",\"vec4\"),t.code.add(m`void setOverlayVTC(in vec2 uv) {\nvtcOverlay = vec4(uv, uv) * overlayTexScale + overlayTexOffset;\n}`),a.code.add(m`bool isValid(vec2 uv, vec2 dxdy) {\nreturn (uv.x >= 0.0 + dxdy.x) && (uv.x <= 1.0 - dxdy.x) && (uv.y >= 0.0 + dxdy.y) && (uv.y <= 1.0 - dxdy.y);\n}\nvec4 getOverlayColor(sampler2D ov0Tex, vec4 texCoords) {\nvec4 color0 = texture(ov0Tex, vec2(texCoords.x * 0.5, texCoords.y));\nvec4 color1 = texture(ov0Tex, vec2(texCoords.z * 0.5 + 0.5, texCoords.w));\nbool isValid0 = isValid(texCoords.xy, fwidth(texCoords.xy));\nbool isValid1 = isValid(texCoords.zw, vec2(0.0, 0.0));\nreturn mix(color1 * float(isValid1), color0, float(isValid0));\n}`),a.code.add(m`vec4 getCombinedOverlayColor() {\nreturn overlayOpacity * getOverlayColor(ovColorTex, vtcOverlay);\n}`),a.code.add(m`vec4 getOverlayColorTexel() {\nvec4 texCoords = vtcOverlay;\nvec2 texDim =  vec2(textureSize(ovColorTex, 0));\nvec4 color0 = texelFetch(ovColorTex, ivec2(vec2(texCoords.x * 0.5, texCoords.y) * texDim), 0);\nvec4 color1 = texelFetch(ovColorTex, ivec2(vec2(texCoords.z * 0.5 + 0.5, texCoords.w) * texDim), 0);\nbool isValid0 = isValid(texCoords.xy, fwidth(texCoords.xy));\nbool isValid1 = isValid(texCoords.zw, vec2(0.0, 0.0));\nreturn mix(color1 * float(isValid1), color0, float(isValid0));\n}`),a.code.add(m`vec2 getAllOverlayHighlightValuesEncoded() {\nvec4 texCoords = vtcOverlay;\nvec2 uvInner = texCoords.xy;\nvec2 uvOuter = texCoords.zw;\nbool isValidInner = isValid(uvInner, fwidth(uvInner));\nbool isValidOuter = isValid(uvOuter, vec2(0.0, 0.0));\nvec2 texelCoordInner = uvInner * vec2(0.5, 1.0);\nvec2 texelCoordOuter = uvOuter * vec2(0.5, 1.0) + vec2(0.5,0.0);\nvec2 texDim =  vec2(textureSize(ovColorTex, 0));\nvec2 texelValueInner = texelFetch(ovColorTex, ivec2(texelCoordInner * texDim), 0).rg;\nvec2 texelValueOuter = texelFetch(ovColorTex, ivec2(texelCoordOuter * texDim), 0).rg;\nreturn\nisValidInner ? texelValueInner :\nisValidOuter ? texelValueOuter :\nvec2(0.0);\n}`),r&&(d(a),s(a),a.code.add(m`vec4 getOverlayWaterColor(vec4 maskInput, vec4 colorInput, vec3 vposEyeDir,\nfloat shadow, vec3 localUp, mat3 tbn, vec3 position, vec3 positionWorld) {\nvec3 n = normalize(tbn *  (2.0 * maskInput.rgb - vec3(1.0)));\nvec3 v = vposEyeDir;\nvec3 final = getSeaColor(n, v, mainLightDirection, colorInput.rgb, mainLightIntensity, localUp, 1.0 - shadow, maskInput.w, position, positionWorld);\nreturn vec4(final, colorInput.w);\n}`))}function T(e,o){return e.identifier===i.Material&&n(e.output)?o.overlay?.getTexture(l.ColorNoRasterImage):e.identifier===i.Material&&e.output===v.ObjectAndLayerIdColor?o.overlay?.getTexture(l.ObjectAndLayerIdColor):e.identifier===i.Highlight?o.overlay?.getTexture(l.Highlight):null}function b(e,l){const i=l.overlay?.overlays[a.INNER]?.extent;o(i)&&(I[0]=e.toMapSpace[0]/r(i)-i[0]/r(i),I[1]=e.toMapSpace[1]/t(i)-i[1]/t(i));const n=l.overlay?.overlays[a.OUTER]?.extent;return o(n)&&(I[2]=e.toMapSpace[0]/r(n)-n[0]/r(n),I[3]=e.toMapSpace[1]/t(n)-n[1]/t(n)),I}function V(e,l){const i=l.overlay?.overlays[a.INNER]?.extent;o(i)&&(I[0]=e.toMapSpace[2]/r(i),I[1]=e.toMapSpace[3]/t(i));const n=l.overlay?.overlays[a.OUTER]?.extent;return o(n)&&(I[2]=e.toMapSpace[2]/r(n),I[3]=e.toMapSpace[3]/t(n)),I}!function(e){e[e.Disabled=0]=\"Disabled\",e[e.Enabled=1]=\"Enabled\",e[e.EnabledWithWater=2]=\"EnabledWithWater\",e[e.COUNT=3]=\"COUNT\"}(C||(C={}));const I=e();class w extends f{constructor(e){super(e,\"vec4\")}}export{g as OverlayIM,C as OverlayMode,O as OverlayTerrain,T as getIMColorTexture};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{fromValues as e}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{ScreenSpacePass as r}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{Float3PassUniform as o}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{glsl as s}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Texture2DPassUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{NoParameters as l}from\"../views/webgl/NoParameters.js\";import{ShaderBuilder as i}from\"../views/webgl/ShaderBuilder.js\";class a extends l{constructor(){super(...arguments),this.color=e(1,1,1)}}function n(){const e=new i;return e.include(r),e.fragment.uniforms.add(new t(\"tex\",(e=>e.texture)),new o(\"uColor\",(e=>e.color))),e.fragment.main.add(s`vec4 texColor = texture(tex, uv);\nfragColor = texColor * vec4(uColor, 1.0);`),e}const m=Object.freeze(Object.defineProperty({__proto__:null,TextureOnlyPassParameters:a,build:n},Symbol.toStringTag,{value:\"Module\"}));export{a as T,m as a,n as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{BindType as r}from\"../../../../webgl/BindType.js\";import{Uniform as s}from\"../../../../webgl/Uniform.js\";class e extends s{constructor(s,e){super(s,\"ivec2\",r.Pass,((r,o,i)=>r.setUniform2iv(s,e(o,i))))}}export{e as Integer2PassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ScreenSpacePass as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{glsl as t}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Texture2DDrawUniform as i}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform.js\";import{NoParameters as r}from\"../views/webgl/NoParameters.js\";import{ShaderBuilder as l}from\"../views/webgl/ShaderBuilder.js\";class u extends r{}function o(){const r=new l,{outputs:u,fragment:o}=r;return r.include(e),o.uniforms.add(new i(\"textureInput\",(e=>e.input))),o.constants.add(\"outlineWidth\",\"int\",Math.ceil(n)),o.constants.add(\"cellSize\",\"int\",c),u.add(\"fragGrid\",\"vec2\"),o.main.add(t`ivec2 inputTextureSize = textureSize(textureInput, 0);\nivec2 cellBottomLeftCornerInput = ivec2(floor(gl_FragCoord.xy) * vec2(cellSize));\nivec2 coordMid =  cellBottomLeftCornerInput + ivec2(cellSize >> 1);\nuvec2 centreTexel = uvec2( texelFetch(textureInput, coordMid, 0).rg * 255.0) & uvec2(0x55u);\nfloat marginSquare = float(outlineWidth*outlineWidth);\nuvec2 outputValue = centreTexel & uvec2(0x55u);\nfor(int y = -outlineWidth; y <= cellSize + outlineWidth; y+=2) {\nint dy = y < 0 ? -y : y > cellSize ? y-cellSize : 0;\nint xMargin = dy > 0 ? int(ceil(sqrt(marginSquare - float(dy*dy)))) : outlineWidth;\nfor(int x = -xMargin; x <= cellSize + xMargin; x+=2) {\nivec2 coord = cellBottomLeftCornerInput + ivec2(x, y);\nuvec2[4] texels = uvec2[4] (\nuvec2(texelFetch(textureInput,coord+ivec2(0,0),0).rg * 255.0) & uvec2(0x55u),\nuvec2(texelFetch(textureInput,coord+ivec2(1,0),0).rg * 255.0) & uvec2(0x55u),\nuvec2(texelFetch(textureInput,coord+ivec2(0,1),0).rg * 255.0) & uvec2(0x55u),\nuvec2(texelFetch(textureInput,coord+ivec2(1,1),0).rg * 255.0) & uvec2(0x55u)\n);\nif (texels[0] == texels[1] && texels[1] == texels[2] && texels[2] == texels[3] && texels[3] ==  centreTexel) {\ncontinue;\n}\nfor (int i=0; i<4; ++i){\noutputValue |= ((texels[i] ^ centreTexel) << 1);\noutputValue |= texels[i];\n}\n}\n}\nfragGrid = vec2(outputValue) / 255.0;`),r}const c=32,n=9,a=.4,s=Object.freeze(Object.defineProperty({__proto__:null,HighlightDownsampleDrawParameters:u,blurSize:a,build:o,gridCellPixelSize:c,outlineSize:n},Symbol.toStringTag,{value:\"Module\"}));export{u as H,s as a,a as b,o as c,c as g,n as o};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{set as e}from\"../../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as l}from\"../../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{glsl as i}from\"../shaderModules/glsl.js\";import{Integer2PassUniform as t}from\"../shaderModules/Integer2PassUniform.js\";import{IntegerPassUniform as o}from\"../shaderModules/IntegerPassUniform.js\";import{Texture2DPassUniform as n}from\"../shaderModules/Texture2DPassUniform.js\";import{g as c}from\"../../../../../chunks/HighlightDownsample.glsl.js\";function s(l){const{vertex:s}=l;s.uniforms.add(new n(\"coverageTexture\",(e=>e.coverageTexture)),new t(\"highlightRenderCellCount\",(l=>e(r,l.horizontalCellCount,l.verticalCellCount))),new t(\"highlightTextureResolution\",(({highlightTexture:l})=>e(r,l.descriptor.width,l.descriptor.height))),new o(\"highlightLevel\",(e=>e.highlightLevel))).constants.add(\"cellSize\",\"int\",c),l.varyings.add(\"sUV\",\"vec2\"),l.varyings.add(\"vOutlinePossible\",\"float\"),s.code.add(i`const ivec2 cellVertices[4] = ivec2[4](ivec2(0,0), ivec2(1,0), ivec2(0,1), ivec2(1,1));`).main.add(i`int cellIndex = gl_InstanceID;\nint cellX = cellIndex % highlightRenderCellCount[0];\nint cellY = (cellIndex - cellX) / highlightRenderCellCount[0];\nivec2 cellPos = ivec2(cellX, cellY);\nuvec2 covTexel = uvec2(texelFetch(coverageTexture, cellPos, 0).rg * 255.0);\nint channelIndex = (highlightLevel >> 2) & 3;\nuint channelValue = covTexel[channelIndex];\nint highlightIndex = (highlightLevel & 3) << 1;\nbool covered = ((channelValue >> highlightIndex) & 1u) == 1u;\nif (!covered) {\ngl_Position = vec4(0.0);\nreturn;\n}\nvOutlinePossible = (((channelValue >> highlightIndex) & 2u) == 2u) ? 1.0 : 0.0;\nivec2 iPosInCell = cellVertices[gl_VertexID];\nvec2 sPos = vec2(cellPos * cellSize + iPosInCell * (cellSize));\nvec2 vPos = sPos / vec2(highlightTextureResolution);\nsUV = vPos;\ngl_Position = vec4(2.0 * vPos - vec2(1.0), 0.0, 1.0);`)}const r=l();export{s as HighlightCellGridScreenSpacePass};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{HighlightCellGridScreenSpacePass as e}from\"../views/3d/webgl-engine/core/shaderLibrary/HighlightCellGridScreenSpacePass.glsl.js\";import{HighlightReadBitmap as l}from\"../views/3d/webgl-engine/core/shaderLibrary/HighlightReadBitmap.glsl.js\";import{FloatPassUniform as i}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as t}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{IntegerBindUniform as o}from\"../views/3d/webgl-engine/core/shaderModules/IntegerBindUniform.js\";import{Texture2DPassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{ShaderBuilder as r}from\"../views/webgl/ShaderBuilder.js\";function a(){const a=new r;a.include(e);const{fragment:c}=a;return c.uniforms.add(new n(\"highlightTexture\",(e=>e.highlightTexture)),new n(\"highlightOptionsTexture\",(e=>e.highlightOptionsTexture)),new i(\"pixelRatio\",(e=>e.pixelRatio)),new i(\"occludedIntensityFactor\",(e=>e.occludedFactor)),new o(\"maxHighlightLevel\",(e=>e.highlights.length-1))),c.constants.add(\"pixelSampleScale\",\"float\",1),a.include(l),c.code.add(t`const float pascal17[9] = float[9](12870.0, 11440.0, 8008.0, 4368.0, 1820.0, 560.0, 120.0, 16.0, 1.0);\nconst float denom17 =  65536.0;\nfloat colorWeight[16] = float[16](0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0);\nfloat colorOcclusion[16] = float[16](0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0);\nfloat weights[16] = float[16](0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0);\nvoid applyTexel(vec2 texel, float weight) {\nif (texel != vec2(0.0)){\nint maxChannel = (maxHighlightLevel >> 2) & 1;\nfor (int channelIndex = 0; channelIndex <= maxChannel; ++channelIndex){\nuint channel = readChannel(texel, channelIndex << 2);\nint firstIndex = channelIndex << 2;\nint maxIndex  = min(firstIndex + 3, maxHighlightLevel);\nfor (int highlightIndex = firstIndex; highlightIndex <= maxIndex; ++highlightIndex ) {\nuint v = readChannelBits(channel, highlightIndex);\nif ((v & 1u) == 1u){\ncolorWeight[highlightIndex] += weight;\nif ((v & 2u) == 2u){\ncolorOcclusion[highlightIndex] += weight;\n}\n}\n}\n}\n}\n}\nvec2 readTexel(ivec2 iuv, int du, int dv) {\nreturn texelFetch(highlightTexture, iuv + ivec2(du, dv), 0).rg;\n}\nvoid readAndApplyTexel(ivec2 iuv, int du, int dv, float weight) {\nvec2 texel = readTexel(iuv, du, dv);\napplyTexel(texel, weight);\n}\nvoid readAndApply2TexelsU(ivec2 iuv, int du, int dv, float weight) {\nreadAndApplyTexel(iuv, -du, dv, weight);\nreadAndApplyTexel(iuv, +du, dv, weight);\n}\nfloat getWeight(int pixelDistance) {\nfloat scaledDistance = float(pixelDistance) * pixelSampleScale / pixelRatio;\nfloat d0f = floor(scaledDistance);\nint d0 = int(d0f);\nif (d0 >= 8){\nreturn 0.0;\n}\nfloat w0 = pascal17[d0];\nfloat w1 = pascal17[d0+1];\nfloat f =  scaledDistance - d0f;\nreturn mix(w0, w1, f);\n}`),c.main.add(t`vec2 highlightTextureSize = vec2(textureSize(highlightTexture,0));\nivec2 iuv = ivec2(sUV * highlightTextureSize);\nvec2 centerTexel = texelFetch(highlightTexture, iuv, 0).rg;\nbool outlinePossible = false;\nif (vOutlinePossible > 0.0){\nfor (int highlightLevel=0; highlightLevel<= maxHighlightLevel; ++highlightLevel) {\nif ((readLevelBits(centerTexel,highlightLevel) & 1u) == 0u) {\noutlinePossible = true;\nbreak;\n}\n}\n}\nif (outlinePossible) {\nint maxPixelDistance = clamp(int(8.0 * pixelRatio / pixelSampleScale), 2, 16);\nfloat weightSum = 0.0;\nfor(int y = 0; y <= maxPixelDistance; ++y) {\nfloat w = getWeight(y);\nweights[y] = w;\nweightSum += w * (y == 0 ? 1.0 : 2.0);\n}\nfor(int y = 0; y <= maxPixelDistance; ++y) {\nweights[y] = weights[y] / weightSum;\n}\nfloat weight0 = weights[0];\napplyTexel(centerTexel, weight0 * weight0);\nfor(int y = 0; y <= maxPixelDistance; y += 1) {\nfloat yFactor = weights[y];\nif (y != 0) {\nfloat xFactor = weight0;\nfloat weight = xFactor * yFactor;\nif (weight > 0.0) {\nreadAndApplyTexel(iuv, 0, +y, weight);\nreadAndApplyTexel(iuv, 0, -y, weight);\n}\n}\nfor(int x = 1; x <= maxPixelDistance; x += 1) {\nfloat xFactor = weights[x];\nfloat weight = xFactor * yFactor;\nif (weight > 0.0) {\nreadAndApply2TexelsU(iuv, x, +y, weight);\nif (y != 0){\nreadAndApply2TexelsU(iuv, x, -y, weight);\n}\n}\n}\n}\n} else {\napplyTexel(centerTexel, 1.0);\n}\nint frontColorIndex = 999;\nint maxColorIndex = 0;\nfor (int i = 0; i <= maxHighlightLevel; ++i) {\nif (colorWeight[i] > 0.0){\nfrontColorIndex = min(frontColorIndex, i);\nmaxColorIndex = max(maxColorIndex, i);\n}\n}\nif (frontColorIndex == 999){\nfragColor = vec4(0.0);\nreturn;\n}\nvec4 accumulatedColor = vec4(0.0);\nfor (int curColorIndex = frontColorIndex; curColorIndex <= maxColorIndex; ++curColorIndex) {\nfloat curColorWeight = colorWeight[curColorIndex];\nif (curColorWeight <= 0.01){\ncontinue;\n}\nuint vc = readLevelBits(centerTexel, curColorIndex);\nbool centerFilled = (vc & 1u) == 1u;\nbool centerOccluded = (vc & 3u) == 3u;\nfloat curColorOcclusion = colorOcclusion[curColorIndex];\nbool occluded = centerFilled ? centerOccluded : curColorOcclusion > 0.5 * curColorWeight;\nint colorChannel = centerFilled ? 0 : 1;\nvec4 colorBase = texelFetch(highlightOptionsTexture, ivec2(curColorIndex, colorChannel), 0);\nfloat occlusionFactor = occluded ? occludedIntensityFactor : 1.0;\nfloat outlineFactor = centerFilled ? 1.0 : smoothstep(0.0, 0.03, curColorWeight);\nfloat intensity = colorBase.a * occlusionFactor * outlineFactor;\nvec3 currentColor = colorBase.rgb;\nfloat a0 = accumulatedColor.a;\nfloat a1 = intensity;\nfloat alpha = clamp(a0 + a1 - a0 * a1, 0.0, 1.0);\nif (alpha > 0.001){\nvec3 blendedColor = ((1.0 - a1) * a0 * accumulatedColor.rgb + a1 * currentColor) / alpha;\naccumulatedColor = vec4(blendedColor, alpha);\n}\n}\nfragColor = accumulatedColor;`),a}const c=Object.freeze(Object.defineProperty({__proto__:null,build:a},Symbol.toStringTag,{value:\"Module\"}));export{c as H,a as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../../core/shaderTechnique/ShaderTechnique.js\";import{H as i}from\"../../../../../chunks/HighlightApply.glsl.js\";import{makePipelineState as o,premultipliedAlphaToPremultipliedAlpha as s,defaultColorWrite as l}from\"../../../../webgl/renderState.js\";class t extends r{constructor(r,o){super(r,o,new e(i,(()=>import(\"../../shaders/HighlightApply.glsl.js\"))))}initializePipeline(){return o({blending:s,colorWrite:l})}}export{t as HighlightApplyTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../../core/shaderTechnique/ShaderTechnique.js\";import{a as o}from\"../../../../../chunks/HighlightDownsample.glsl.js\";import{makePipelineState as s,defaultColorWrite as i}from\"../../../../webgl/renderState.js\";class l extends r{constructor(r,s){super(r,s,new e(o,(()=>import(\"../../shaders/HighlightDownsample.glsl.js\"))))}initializePipeline(){return s({colorWrite:i})}}export{l as HighlightDownsampleTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{defaultOccludedFactor as t}from\"../../../../support/HighlightDefaults.js\";import{NoParameters as o}from\"../../../../webgl/NoParameters.js\";class e extends o{constructor(){super(...arguments),this.occludedFactor=t,this.verticalCellCount=0,this.horizontalCellCount=0,this.highlightLevel=0,this.pixelRatio=1}}export{e as HighlightPassParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{HighlightCellGridScreenSpacePass as e}from\"../views/3d/webgl-engine/core/shaderLibrary/HighlightCellGridScreenSpacePass.glsl.js\";import{HighlightReadBitmap as i}from\"../views/3d/webgl-engine/core/shaderLibrary/HighlightReadBitmap.glsl.js\";import{glsl as r}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{IntegerPassUniform as l}from\"../views/3d/webgl-engine/core/shaderModules/IntegerPassUniform.js\";import{Texture2DPassUniform as g}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{ShaderBuilder as t}from\"../views/webgl/ShaderBuilder.js\";function s(){const s=new t;s.include(e),s.include(i);const{fragment:h}=s;return s.outputs.add(\"fragSingleHighlight\",\"vec2\",0),h.uniforms.add(new g(\"highlightTexture\",(e=>e.highlightTexture)),new l(\"highlightLevel\",(e=>e.highlightLevel))),h.main.add(r`ivec2 iuv = ivec2(gl_FragCoord.xy);\nvec2 inputTexel = texelFetch(highlightTexture, iuv, 0).rg;\nuint bits = readLevelBits(inputTexel, highlightLevel);\nbool hasHighlight = (bits & 1u) == 1u;\nbool hasOccluded  = (bits & 2u) == 2u;\nfragSingleHighlight = vec2(hasHighlight ? 1.0 : 0.0, hasOccluded ? 1.0 : 0.0);`),s}const h=Object.freeze(Object.defineProperty({__proto__:null,build:s},Symbol.toStringTag,{value:\"Module\"}));export{h as H,s as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../../core/shaderTechnique/ShaderTechnique.js\";import{H as i}from\"../../../../../chunks/HighlightToSingle.glsl.js\";import{makePipelineState as o,defaultColorWrite as s}from\"../../../../webgl/renderState.js\";class l extends r{constructor(r,o){super(r,o,new e(i,(()=>import(\"../../shaders/HighlightToSingle.glsl.js\"))))}initializePipeline(){return o({colorWrite:s})}}export{l as HighlightToSingleTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{HighlightCellGridScreenSpacePass as e}from\"../views/3d/webgl-engine/core/shaderLibrary/HighlightCellGridScreenSpacePass.glsl.js\";import{HighlightReadBitmap as t}from\"../views/3d/webgl-engine/core/shaderLibrary/HighlightReadBitmap.glsl.js\";import{Float2DrawUniform as i}from\"../views/3d/webgl-engine/core/shaderModules/Float2DrawUniform.js\";import{FloatPassUniform as l}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as r}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{IntegerPassUniform as o}from\"../views/3d/webgl-engine/core/shaderModules/IntegerPassUniform.js\";import{Texture2DPassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{o as g,b as u}from\"./HighlightDownsample.glsl.js\";import{ShaderBuilder as h}from\"../views/webgl/ShaderBuilder.js\";function s(){const s=new h;s.include(e);const{fragment:c}=s;return c.uniforms.add(new n(\"blurInput\",(e=>e.singleHighlightBlurTexture)),new i(\"blurSize\",(e=>e.blurSize)),new n(\"highlightTexture\",(e=>e.highlightTexture)),new n(\"highlightOptionsTexture\",(e=>e.highlightOptionsTexture)),new o(\"highlightLevel\",(e=>e.highlightLevel)),new l(\"occludedIntensityFactor\",(e=>e.occludedFactor))),c.constants.add(\"inner\",\"float\",1-(g-u)/g),s.include(t),c.main.add(r`vec2 highlightTextureSize = vec2(textureSize(highlightTexture,0));\nvec2 uv = sUV;\nvec2 center = texture(blurInput, uv).rg;\nvec2 blurredHighlightValue = (vOutlinePossible == 0.0)\n? center\n: center * 0.204164\n+ texture(blurInput, uv + blurSize * 1.407333).rg * 0.304005\n+ texture(blurInput, uv - blurSize * 1.407333).rg * 0.304005\n+ texture(blurInput, uv + blurSize * 3.294215).rg * 0.093913\n+ texture(blurInput, uv - blurSize * 3.294215).rg * 0.093913;\nfloat highlightIntensity = blurredHighlightValue.r;\nfloat occlusionWeight = blurredHighlightValue.g;\nif (highlightIntensity <= 0.01) {\ndiscard;\n}\nvec4 fillColor    = texelFetch(highlightOptionsTexture, ivec2(highlightLevel, 0), 0);\nvec4 outlineColor = texelFetch(highlightOptionsTexture, ivec2(highlightLevel, 1), 0);\nvec2 centerTexel = texelFetch(highlightTexture, ivec2(uv * highlightTextureSize), 0).rg;\nuint centerBits = readLevelBits(centerTexel, highlightLevel);\nbool centerFilled = (centerBits & 1u) == 1u;\nbool centerOccluded = (centerBits & 3u) == 3u;\nbool occluded = centerOccluded || (0.5 * highlightIntensity < occlusionWeight);\nfloat occlusionFactor = occluded ? occludedIntensityFactor : 1.0;\nfloat outlineFactor = centerFilled ? 1.0 : smoothstep(0.0, inner, highlightIntensity);\nfloat fillFactor = centerFilled ? 1.0 : 0.0;\nvec4 baseColor = mix(outlineColor, fillColor, fillFactor);\nfloat intensity = baseColor.a * occlusionFactor * outlineFactor;\nfragColor = vec4(baseColor.rgb, intensity);`),s}const c=Object.freeze(Object.defineProperty({__proto__:null,build:s},Symbol.toStringTag,{value:\"Module\"}));export{c as S,s as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../../core/shaderTechnique/ShaderTechnique.js\";import{S as i}from\"../../../../../chunks/SingleHighlightApply.glsl.js\";import{makePipelineState as l,premultipliedAlphaToPremultipliedAlpha as o,defaultColorWrite as s}from\"../../../../webgl/renderState.js\";class t extends r{constructor(r,l){super(r,l,new e(i,(()=>import(\"../../shaders/SingleHighlightApply.glsl.js\"))))}initializePipeline(){return l({blending:o,colorWrite:s})}}export{t as SingleHighlightApplyTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../core/libs/gl-matrix-2/factories/vec2f64.js\";import{HighlightCellGridScreenSpacePass as r}from\"../views/3d/webgl-engine/core/shaderLibrary/HighlightCellGridScreenSpacePass.glsl.js\";import{Float2DrawUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/Float2DrawUniform.js\";import{glsl as i}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Texture2DDrawUniform as l}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform.js\";import{NoParameters as s}from\"../views/webgl/NoParameters.js\";import{ShaderBuilder as u}from\"../views/webgl/ShaderBuilder.js\";class n extends s{constructor(){super(...arguments),this.blurSize=e()}}function o(){const e=new u;return e.include(r),e.outputs.add(\"fragSingleHighlight\",\"vec2\",0),e.fragment.uniforms.add(new t(\"blurSize\",(e=>e.blurSize)),new l(\"blurInput\",(e=>e.blurInput))).main.add(i`vec2 highlightTextureSize = vec2(textureSize(blurInput,0));\nvec2 center = texture(blurInput, sUV).rg;\nif (vOutlinePossible == 0.0) {\nfragSingleHighlight = center;\n} else {\nvec2 sum = center * 0.204164;\nsum += texture(blurInput, sUV + blurSize * 1.407333).rg * 0.304005;\nsum += texture(blurInput, sUV - blurSize * 1.407333).rg * 0.304005;\nsum += texture(blurInput, sUV + blurSize * 3.294215).rg * 0.093913;\nsum += texture(blurInput, sUV - blurSize * 3.294215).rg * 0.093913;\nfragSingleHighlight = sum;\n}`),e}const g=Object.freeze(Object.defineProperty({__proto__:null,SingleHighlightBlurDrawParameters:n,build:o},Symbol.toStringTag,{value:\"Module\"}));export{n as S,g as a,o as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../../core/shaderTechnique/ShaderTechnique.js\";import{a as i}from\"../../../../../chunks/SingleHighlightBlur.glsl.js\";import{makePipelineState as l,defaultColorWrite as o}from\"../../../../webgl/renderState.js\";class s extends r{constructor(r,l){super(r,l,new e(i,(()=>import(\"../../shaders/SingleHighlightBlur.glsl.js\"))))}initializePipeline(){return l({colorWrite:o})}}export{s as SingleHighlightBlurTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{VertexAttribute as e}from\"./VertexAttribute.js\";import{DataType as r}from\"../../../webgl/enums.js\";import{VertexElementDescriptor as t}from\"../../../webgl/VertexElementDescriptor.js\";const O=[],o=[new t(e.POSITION,3,r.FLOAT,0,12)],m=[new t(e.POSITION,2,r.FLOAT,0,8)],n=[new t(e.POSITION,2,r.FLOAT,0,16),new t(e.UV0,2,r.FLOAT,8,16)];export{O as NoVertex,m as Pos2,n as Pos2Tex,o as Pos3};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{releaseMaybe as t,disposeMaybe as i}from\"../../../../../core/maybe.js\";import{watch as r,initial as s}from\"../../../../../core/reactiveUtils.js\";import{property as o}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as h}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{set as l}from\"../../../../../core/libs/gl-matrix-2/math/vec2.js\";import{ZEROS as n}from\"../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{InternalRenderCategory as a}from\"../../../webgl.js\";import{ColorFormat as g}from\"../../../webgl/formats.js\";import c from\"../../../webgl/RenderNode.js\";import{HighlightApplyTechnique as u}from\"./HighlightApplyTechnique.js\";import{HighlightDownsampleTechnique as m}from\"./HighlightDownsampleTechnique.js\";import{HighlightPassParameters as p}from\"./HighlightPassParameters.js\";import{HighlightToSingleTechnique as d}from\"./HighlightToSingleTechnique.js\";import{SingleHighlightApplyTechnique as f}from\"./SingleHighlightApplyTechnique.js\";import{SingleHighlightBlurTechnique as b}from\"./SingleHighlightBlurTechnique.js\";import{RenderRequestType as T}from\"../../lib/basicInterfaces.js\";import{Default3D as w}from\"../../lib/DefaultVertexAttributeLocations.js\";import{NoVertex as x}from\"../../lib/DefaultVertexBufferLayouts.js\";import{VertexArrayObject as _}from\"../../lib/VertexArrayObject.js\";import{H as C,g as v}from\"../../../../../chunks/HighlightDownsample.glsl.js\";import{S as j}from\"../../../../../chunks/SingleHighlightBlur.glsl.js\";import{BufferObject as H}from\"../../../../webgl/BufferObject.js\";import{PixelFormat as q,TextureSamplingMode as P,FramebufferBit as R,Usage as D,TextureType as O,PrimitiveType as S,DataType as A}from\"../../../../webgl/enums.js\";import{Texture as E}from\"../../../../webgl/Texture.js\";import{TextureDescriptor as y}from\"../../../../webgl/TextureDescriptor.js\";let I=class extends c{constructor(){super(...arguments),this.produces=a.HIGHLIGHTS,this.consumes={required:[a.HIGHLIGHTS,\"highlights\"]},this._useMultipleHighlights=!1,this._downsampleDrawParameters=new C,this._passParameters=new p,this._singleHighlightBlurDrawParameters=new j,this._grid=new M}initialize(){this.addHandles([r((()=>this._updateOptionsTexture()),(()=>{}),s)])}destroy(){this._grid.coverage=t(this._grid.coverage),this._grid.vao=i(this._grid.vao),this._passParameters.highlightOptionsTexture=t(this._passParameters.highlightOptionsTexture)}_updateOptionsTexture(){if(null==this._passParameters.highlightOptionsTexture){const e=new y(16,2);e.internalFormat=q.RGBA,e.samplingMode=P.NEAREST,this._passParameters.highlightOptionsTexture=new E(this.renderingContext,e,null)}this._passParameters.highlightOptionsTexture.setData(U(this.view.state.highlights)),this.requestRender(T.UPDATE)}precompile(){this.techniques.precompile(m),this._useMultipleHighlights?this.techniques.precompile(u):(this.techniques.precompile(d),this.techniques.precompile(b),this.techniques.precompile(f))}render(e){const t=e.find((({name:e})=>e===a.HIGHLIGHTS)),{techniques:i,bindParameters:r,_passParameters:s,renderingContext:o}=this;if(!r.decorations)return t;const h=i.get(m);if(!h.compiled)return this.requestRender(T.UPDATE),t;const l=e.find((({name:e})=>\"highlights\"===e)).getTexture(),n=()=>{this._gridUpdateResources(l);const e=this._gridComputeCoverage(h,l,r),{horizontalCellCount:t,verticalCellCount:i}=e;return s.horizontalCellCount=t,s.verticalCellCount=i,s.coverageTexture=e.coverage?.getTexture(),e},g=e=>{const t=e.verticalCellCount*e.horizontalCellCount;o.bindVAO(e.vao),o.drawElementsInstanced(S.TRIANGLES,6,A.UNSIGNED_BYTE,0,t)},{camera:c}=r,u=()=>{o.bindFramebuffer(t.fbo),o.setViewport4fv(c.fullViewport)};return this._useMultipleHighlights?this._renderMultiple(l,n,g,u):this._renderSingle(l,n,g,u),s.highlightTexture=null,s.coverageTexture=null,t}_renderMultiple(e,t,i,r){const{techniques:s,bindParameters:o,_passParameters:h,renderingContext:l}=this,n=s.get(u);if(!n.compiled)return void this.requestRender(T.UPDATE);const a=t();h.highlightTexture=e,h.pixelRatio=o.camera.pixelRatio,l.bindTechnique(n,o,h),r(),i(a)}_renderSingle(e,t,i,r){const{fboCache:s,techniques:o,bindParameters:h,_passParameters:n,renderingContext:a}=this,c=o.get(d),u=o.get(b),m=o.get(f);if(!m.compiled||!u.compiled||!c.compiled)return void this.requestRender(T.UPDATE);const p=t(),{width:w,height:x}=e.descriptor;n.highlightTexture=e;const{camera:_}=h,{fullWidth:C,fullHeight:v,pixelRatio:j}=_,H=Math.ceil(C/j),q=Math.ceil(v/j),{_singleHighlightBlurDrawParameters:P}=this,D=this.view._stage.renderView.renderer,{highlights:O}=h;for(let d=0;d<O.length;++d){const{name:e}=O[d];if(!D.hasHighlightOptions(e))continue;n.highlightLevel=d,a.setClearColor(0,0,0,0);const t=s.acquire(w,x,\"single highlight\",g.RG);a.bindFramebuffer(t.fbo),a.setViewport(0,0,w,x),a.clear(R.COLOR),a.bindTechnique(c,h,n),i(p),P.blurInput=t.getTexture(),l(P.blurSize,1/H,0);const o=s.acquire(H,q,\"single highlight blur h\",g.RG);a.unbindTexture(o.fbo?.colorTexture),a.bindFramebuffer(o.fbo),a.setViewport(0,0,H,q),a.clear(R.COLOR),a.bindTechnique(u,h,n,P),i(p),t.release(),l(P.blurSize,0,1/q),n.singleHighlightBlurTexture=o.getTexture(),r(),a.bindTechnique(m,h,n,P),i(p),o.release()}}_gridUpdateResources(e){const t=this._grid,{width:i,height:r}=e.descriptor;if(t.horizontalCellCount=Math.ceil(i/v),t.verticalCellCount=Math.ceil(r/v),t.vao)return;const s=this.renderingContext,o=H.createIndex(s,D.STATIC_DRAW,F);t.vao=new _(s,w,new Map([[\"geometry\",x]]),new Map([[\"geometry\",H.createVertex(s,D.STATIC_DRAW)]]),o)}_gridComputeCoverage(e,t,i){const r=this.renderingContext,s=this._grid,o=t.descriptor,h=Math.ceil(o.width/v),l=Math.ceil(o.height/v);this._downsampleDrawParameters.input=t,s.coverage?.release();const n=this.fboCache.acquire(h,l,\"highlight coverage\",g.RG);return s.coverage=n,r.bindFramebuffer(n.fbo),r.bindTechnique(e,i,this._passParameters,this._downsampleDrawParameters),r.setViewport(0,0,h,l),r.screen.draw(),s}get test(){}};e([o()],I.prototype,\"produces\",void 0),e([o()],I.prototype,\"consumes\",void 0),I=e([h(\"esri.views.3d.webgl-engine.effects.highlight.Highlight\")],I);class M{constructor(){this.coverage=null,this.vao=null,this.verticalCellCount=0,this.horizontalCellCount=0,this.viewportWidth=0,this.viewportHeight=0}}function U(e){const t=new Uint8Array(128);let i=0;for(const r of e){const e=4*i,s=4*i+64;++i;const{color:o}=r,h=r.haloColor??o;t[e+0]=o.r,t[e+1]=o.g,t[e+2]=o.b,t[e+3]=r.fillOpacity*o.a*255,t[s+0]=h.r,t[s+1]=h.g,t[s+2]=h.b,t[s+3]=r.haloOpacity*h.a*255}return t}let G=0;function L(e){let t=0;for(const r of e){const{name:e}=r;t+=e.length;const{color:i,fillOpacity:s,haloColor:o,haloOpacity:h}=r;t+=i.r+i.g+i.b+i.a+s,t+=o?o.r+o.g+o.b+o.a+h:0}const i=e.at(0);if(i){const{shadowOpacity:e,shadowDifference:r,shadowColor:s}=i;t+=e+r+s.r+s.g+s.b+s.a}return G+++(t>=0?0:1)}const F=new Uint8Array([0,1,2,2,1,3]);function V(e,t,i,r,s,o=0){const h=r.highlights,a=h.length>1?t.acquire(i.width,i.height,\"highlight mix\",g.RG):null;if(a){const t=e.getBoundFramebufferObject();e.bindFramebuffer(a.fbo),e.clearFramebuffer(n),e.bindFramebuffer(t)}const c=a?.getTexture();r.highlightMixTexture=c,l(r.highlightMixOrigin,o,0),h.forEach(((t,h)=>{h>0&&(e.bindTexture(c,E.TEXTURE_UNIT_FOR_UPDATES),e.gl.copyTexSubImage2D(O.TEXTURE_2D,0,0,0,o,0,i.width,i.height),e.bindTexture(null,E.TEXTURE_UNIT_FOR_UPDATES)),e.clear(R.DEPTH),r.highlightLevel=h,s()})),r.highlightLevel=null,r.highlightMixTexture=null,a?.release()}export{I as Highlight,V as renderHighlightBuffer,L as trackHighlightOptions};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import{disposeMaybe as t}from\"../../../../core/maybe.js\";import{NestedMap as r}from\"../../../../core/NestedMap.js\";import{assert as i}from\"./Util.js\";class s{constructor(e,t,i,s){this._textures=e,this._techniques=t,this.materialChanged=i,this.requestRender=s,this._id2glMaterialRef=new r}dispose(){this._textures.destroy()}acquire(e,t,r){this._ownMaterial(e);const i=e.produces.get(t);if(!i?.(r))return null;let s=this._id2glMaterialRef.get(r,e.id);if(null==s){const t=e.createGLMaterial({material:e,techniques:this._techniques,textures:this._textures,output:r});s=new a(t),this._id2glMaterialRef.set(r,e.id,s)}return s.ref(),s.glMaterial}release(e,r){const i=this._id2glMaterialRef.get(r,e.id);null!=i&&(i.unref(),i.referenced||(t(i.glMaterial),this._id2glMaterialRef.delete(r,e.id)))}_ownMaterial(t){t.repository&&t.repository!==this&&e.getLogger(\"esri.views.3d.webgl-engine.lib.GLMaterialRepository\").error(\"Material is already owned by a different material repository\"),t.repository=this}}class a{constructor(e){this.glMaterial=e,this._refCnt=0}ref(){++this._refCnt}unref(){--this._refCnt,i(this._refCnt>=0)}get referenced(){return this._refCnt>0}}export{s as GLMaterialRepository};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nvar e;!function(e){e[e.Immediate=0]=\"Immediate\",e[e.FadeWithWeather=1]=\"FadeWithWeather\"}(e||(e={}));export{e as Update};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{create as i}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{create as t}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{CloudsParameters as h}from\"../../environment/CloudsParameters.js\";import e from\"../../webgl/RenderCamera.js\";import{HUDRenderStyle as s}from\"../core/shaderLibrary/hud/HUDRenderStyle.js\";import{OITPass as r}from\"./OITPass.js\";import{RenderSlot as g}from\"./RenderSlot.js\";import{Update as n}from\"./Update.js\";import{SceneLighting as l}from\"../lighting/SceneLighting.js\";class a{constructor(i,t){this.width=i,this.height=t}}class o{constructor(i){this.shadowMap=i,this.slot=g.OPAQUE_MATERIAL,this.slicePlane=null,this.hasOccludees=!1,this.enableFillLights=!0,this.oitPass=r.NONE,this.alignPixelEnabled=!1,this.decorations=!0,this.overlayStretch=1,this.viewshedEnabled=!1,this._camera=new e,this._inverseViewport=t(),this._oldLighting=new l,this._newLighting=new l,this._fadedLighting=new l,this._lighting=this._newLighting,this.ssr=new c,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.highlights=new Array,this.highlightOrderMap=new Map,this.highlightMixOrigin=t(),this.highlightMixTexture=null,this.hudRenderStyle=s.Occluded,this.hudOccludedFragmentOpacity=1,this.clouds=new h,this.shadowHighlightsVisible=!1}get camera(){return this._camera}set camera(i){this._camera=i,this._inverseViewport[0]=1/i.fullViewport[2],this._inverseViewport[1]=1/i.fullViewport[3]}get inverseViewport(){return this._inverseViewport}get lighting(){return this._lighting}fadeLighting(){switch(this.clouds.fadeFactor){case 0:this._lighting=this._oldLighting;break;default:this._fadedLighting.lerpLighting(this._oldLighting,this._newLighting,this.clouds.fadeFactor),this._lighting=this._fadedLighting;break;case 1:this._lighting=this._newLighting,this._oldLighting.copyFrom(this._newLighting)}}updateLighting(i,t,h,e){this._oldLighting.copyFrom(this.lighting),this._newLighting.noonFactor=t,this._newLighting.globalFactor=h,this._newLighting.set(i),e===n.FadeWithWeather&&this.clouds.requestFade(),this.fadeLighting()}get highlight(){return null==this.highlightLevel?null:this.highlights[this.highlightLevel]}}class c{constructor(){this.fadeFactor=1,this.reprojectionMatrix=i()}}export{o as BindParameters,a as ViewportSize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{Milliseconds as r}from\"../../../../core/time.js\";import e from\"../../webgl/RenderCamera.js\";import{ShaderOutput as t}from\"../core/shaderLibrary/ShaderOutput.js\";import{BindParameters as s}from\"./BindParameters.js\";import{RenderOccludedFlag as i}from\"./Material.js\";class a{constructor(r,i){this.rctx=r,this.lastFrameCamera=new e,this.output=t.Color,this.renderOccludedMask=o,this.bind=new s(i),this.bind.alignPixelEnabled=!0}}class n extends a{constructor(e,t,s){super(e,t),this.techniques=s,this.time=r(0)}}const o=i.Occlude|i.OccludeAndTransparent|i.OccludeAndTransparentStencil;export{a as OverlayRenderContext,n as RenderContext,o as defaultRenderOccludedMask};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as e}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{create as t}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import s from\"../../webgl/RenderCamera.js\";let i=class extends s{constructor(){super(...arguments),this._projectionMatrix=t()}get projectionMatrix(){return this._projectionMatrix}};r([o()],i.prototype,\"_projectionMatrix\",void 0),r([o({readOnly:!0})],i.prototype,\"projectionMatrix\",null),i=r([e(\"esri.views.3d.webgl-engine.lib.CascadeCamera\")],i);export{i as CascadeCamera};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{clamp as t,lerp as s,acosClamped as e}from\"../../../../core/mathUtils.js\";import{releaseMaybe as i}from\"../../../../core/maybe.js\";import{create as a}from\"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{translate as r,multiply as h,invert as o,lookAt as n}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{IDENTITY as c,create as l}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{set as d,add as m,scale as u,lerp as _,squaredDistance as f,subtract as g,dot as p,negate as x,normalize as b,copy as w}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as M}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{p as C,c as j,v as T,t as y,i as D}from\"../../../../chunks/vec32.js\";import{create as H}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{s as v,t as S}from\"../../../../chunks/vec42.js\";import{create as R}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{ViewingMode as O}from\"../../../ViewingMode.js\";import{ColorFormat as E,DepthFormat as U}from\"../../webgl/formats.js\";import{CascadeCamera as F}from\"./CascadeCamera.js\";import{applyTextureResizeModulo as L,applyTextureResizeFloorModulo as Q}from\"./textureUtils.js\";import{assert as V,logWithBase as N,verify as A,rayRay2D as B}from\"./Util.js\";import{TextureType as I,FramebufferBit as W}from\"../../../webgl/enums.js\";import{Texture as z}from\"../../../webgl/Texture.js\";var P;!function(t){t[t.Highlight=0]=\"Highlight\",t[t.ExcludeHighlight=1]=\"ExcludeHighlight\"}(P||(P={}));class q{constructor(){this.camera=new F,this.lightMat=l()}}class G{constructor(){this.maxNumCascadesHighQuality=4,this.maxNumCascadesLowQuality=4,this.textureSizeModHighQuality=1.3,this.textureSizeModLowQuality=.9,this.splitSchemeLambda=0}}class X{constructor(t,s){this._fbos=t,this._viewingMode=s,this._enabled=!1,this._snapshots=new Array,this._textureHeight=0,this._numCascades=1,this.settings=new G,this._projectionView=l(),this._projectionViewInverse=l(),this._modelViewLight=l(),this._cascadeDistances=[0,0,0,0,0],this._usedCascadeDistances=R(),this._cascades=[new q,new q,new q,new q],this._lastOrigin=null,this._maxTextureWidth=Math.min(has(\"esri-mobile\")?4096:16384,t.rctx.parameters.maxTextureSize)}dispose(){this.enabled=!1,this.disposeOffscreenBuffers()}get depthTexture(){return this._handle?.getTexture()}get _textureWidth(){return this._textureHeight*this._numCascades}get numCascades(){return this._numCascades}get cascadeDistances(){return v(this._usedCascadeDistances,this._cascadeDistances[0],this._numCascades>1?this._cascadeDistances[1]:1/0,this._numCascades>2?this._cascadeDistances[2]:1/0,this._numCascades>3?this._cascadeDistances[3]:1/0)}disposeOffscreenBuffers(){this._handle=i(this._handle),this._discardSnapshots()}set maxCascades(s){this.settings.maxNumCascadesHighQuality=t(Math.floor(s),1,4)}get maxCascades(){return this.settings.maxNumCascadesHighQuality}set enabled(t){this._enabled=t,t||this.disposeOffscreenBuffers()}get enabled(){return this._enabled}get ready(){return this._enabled&&null!=this.depthTexture}get cascades(){for(let t=0;t<this._numCascades;++t)it[t]=this._cascades[t];return it.length=this._numCascades,it}start(t,s,e,i,a){V(this.enabled);const{near:r,far:h}=Tt(e);this._computeCascadeDistances(r,h,i),this._textureHeight=this._computeTextureHeight(t,a,i),this._setupMatrices(t,s);const{viewMatrix:o,projectionMatrix:n}=t;for(let c=0;c<this._numCascades;++c)this._constructCascade(c,n,o,s);this._lastOrigin=null,this.clear()}finish(){V(this.enabled),this._handle?.detachDepth()}getShadowMapMatrices(t){if(!this._lastOrigin||!C(t,this._lastOrigin)){this._lastOrigin=this._lastOrigin||H(),j(this._lastOrigin,t);for(let s=0;s<this._numCascades;++s){r(at,this._cascades[s].lightMat,t);for(let t=0;t<16;++t)rt[16*s+t]=at[t]}}return rt}moveSnapshot(t){V(this.enabled),this._handle?.detachDepth(),this._snapshots[t]?.release(),this._snapshots[t]=this._handle,this._handle=null,this.clear()}copySnapshot(t){const s=this._handle?.getTexture()?.descriptor;if(!this.enabled||!s)return;this._snapshots[t]?.release();const{width:e,height:i}=s,a=t===P.Highlight?\"shadow highlight snapshot\":\"shadow no highlight snapshot\";this._snapshots[t]=this._fbos.acquire(e,i,a,E.RGBA4);const r=this._fbos.rctx;this._bindFbo();const h=r.bindTexture(this._snapshots[t]?.getTexture(),z.TEXTURE_UNIT_FOR_UPDATES);r.gl.copyTexSubImage2D(I.TEXTURE_2D,0,0,0,0,0,e,i),r.bindTexture(h,z.TEXTURE_UNIT_FOR_UPDATES)}getSnapshot(t){return this.enabled?this._snapshots[t]?.getTexture():null}clear(){const t=this._fbos.rctx;this._ensureFbo(),this._bindFbo(),t.setClearColor(1,1,1,1),t.clear(W.COLOR|W.DEPTH)}_computeTextureHeight(t,s,e){const i=Math.min(window.devicePixelRatio,s)/t.pixelRatio,a=e?this.settings.textureSizeModHighQuality:this.settings.textureSizeModLowQuality,r=L(Math.floor(Math.max(t.fullWidth,t.fullHeight)*i*a)),h=Math.min(this._maxTextureWidth,this._numCascades*r);return Q(h/this._numCascades)}_ensureFbo(){this._handle?.fbo?.width===this._textureWidth&&this._handle?.fbo.height===this._textureHeight||(this._handle?.release(),this._handle=this._fbos.acquire(this._textureWidth,this._textureHeight,\"shadow map\",E.RGBA4)),this._handle?.acquireDepth(U.DEPTH16_BUFFER)}_discardSnapshot(t){this._snapshots[t]=i(this._snapshots[t])}_discardSnapshots(){for(let t=0;t<this._snapshots.length;++t)this._discardSnapshot(t);this._snapshots.length=0}_bindFbo(){this._fbos.rctx.bindFramebuffer(this._handle?.fbo)}_constructCascade(t,s,e,i){const a=this._cascades[t],o=-this._cascadeDistances[t],n=-this._cascadeDistances[t+1],c=(s[10]*o+s[14])/Math.abs(s[11]*o+s[15]),l=(s[10]*n+s[14])/Math.abs(s[11]*n+s[15]);V(c<l);for(let r=0;r<8;++r){v(J,r%4==0||r%4==3?-1:1,r%4==0||r%4==1?-1:1,r<4?c:l,1);const t=K[r];S(t,J,this._projectionViewInverse),t[0]/=t[3],t[1]/=t[3],t[2]/=t[3]}T(et,K[0]),a.camera.viewMatrix=r(k,this._modelViewLight,et);for(let r=0;r<8;++r)y(K[r],K[r],a.camera.viewMatrix);let d=K[0][2],m=K[0][2];for(let r=1;r<8;++r)d=Math.min(d,K[r][2]),m=Math.max(m,K[r][2]);d-=200,m+=200,a.camera.near=-m,a.camera.far=-d,jt(e,i,d,m,a.camera),h(a.lightMat,a.camera.projectionMatrix,a.camera.viewMatrix);const u=this._textureHeight;a.camera.viewport=[t*u,0,u,u]}_setupMatrices(t,s){h(this._projectionView,t.projectionMatrix,t.viewMatrix),o(this._projectionViewInverse,this._projectionView);const e=this._viewingMode===O.Global?t.eye:D(et,0,0,1);n(this._modelViewLight,[0,0,0],[-s[0],-s[1],-s[2]],e)}_computeCascadeDistances(t,e,i){const a=i?this.settings.maxNumCascadesHighQuality:this.settings.maxNumCascadesLowQuality;this._numCascades=Math.min(1+Math.floor(N(e/t,4)),a);const r=(e-t)/this._numCascades,h=(e/t)**(1/this._numCascades);let o=t,n=t;for(let c=0;c<this._numCascades+1;++c)this._cascadeDistances[c]=s(o,n,this.settings.splitSchemeLambda),o*=h,n+=r}get test(){}}const k=l(),J=R(),K=[];for(let yt=0;yt<8;++yt)K.push(R());const Y=M(),Z=M(),$=M(),tt=M(),st=M(),et=H(),it=[],at=l(),rt=c.concat(c,c,c,c),ht=M(),ot=M(),nt=[M(),M(),M(),M()],ct=M(),lt=M(),dt=M(),mt=M(),ut=M(),_t=M(),ft=M();function gt(t,s,e,i,a,r,h,o){d(ht,0,0);for(let d=0;d<4;++d)m(ht,ht,t[d]);u(ht,ht,.25),d(ot,0,0);for(let d=4;d<8;++d)m(ot,ot,t[d]);u(ot,ot,.25),_(nt[0],t[4],t[5],.5),_(nt[1],t[5],t[6],.5),_(nt[2],t[6],t[7],.5),_(nt[3],t[7],t[4],.5);let n=0,c=f(nt[0],ht);for(let d=1;d<4;++d){const t=f(nt[d],ht);t<c&&(c=t,n=d)}g(ct,nt[n],t[n+4]);const l=ct[0];let M,C;ct[0]=-ct[1],ct[1]=l,g(lt,ot,ht),p(lt,ct)<0&&x(ct,ct),_(ct,ct,lt,e),b(ct,ct),M=C=p(g(dt,t[0],ht),ct);for(let d=1;d<8;++d){const s=p(g(dt,t[d],ht),ct);s<M?M=s:s>C&&(C=s)}w(i,ht),u(dt,ct,M-s),m(i,i,dt);let j=-1,T=1,y=0,D=0;for(let d=0;d<8;++d){g(mt,t[d],i),b(mt,mt);const s=ct[0]*mt[1]-ct[1]*mt[0];s>0?s>j&&(j=s,y=d):s<T&&(T=s,D=d)}A(j>0,\"leftArea\"),A(T<0,\"rightArea\"),u(ut,ct,M),m(ut,ut,ht),u(_t,ct,C),m(_t,_t,ht),ft[0]=-ct[1],ft[1]=ct[0];const H=B(i,t[D],_t,m(dt,_t,ft),1,a),v=B(i,t[y],_t,dt,1,r),S=B(i,t[y],ut,m(dt,ut,ft),1,h),R=B(i,t[D],ut,dt,1,o);A(H,\"rayRay\"),A(v,\"rayRay\"),A(S,\"rayRay\"),A(R,\"rayRay\")}function pt(t,s){return 3*s+t}const xt=M();function bt(t,s){return d(xt,t[s],t[s+3]),xt}const wt=M(),Mt=a();function Ct(t,s,e,i,a){g(wt,e,i),u(wt,wt,.5),Mt[0]=wt[0],Mt[1]=wt[1],Mt[2]=0,Mt[3]=wt[1],Mt[4]=-wt[0],Mt[5]=0,Mt[6]=wt[0]*wt[0]+wt[1]*wt[1],Mt[7]=wt[0]*wt[1]-wt[1]*wt[0],Mt[8]=1,Mt[pt(0,2)]=-p(bt(Mt,0),t),Mt[pt(1,2)]=-p(bt(Mt,1),t);let r=p(bt(Mt,0),e)+Mt[pt(0,2)],h=p(bt(Mt,1),e)+Mt[pt(1,2)],o=p(bt(Mt,0),i)+Mt[pt(0,2)],n=p(bt(Mt,1),i)+Mt[pt(1,2)];r=-(r+o)/(h+n),Mt[pt(0,0)]+=Mt[pt(1,0)]*r,Mt[pt(0,1)]+=Mt[pt(1,1)]*r,Mt[pt(0,2)]+=Mt[pt(1,2)]*r,r=1/(p(bt(Mt,0),e)+Mt[pt(0,2)]),h=1/(p(bt(Mt,1),e)+Mt[pt(1,2)]),Mt[pt(0,0)]*=r,Mt[pt(0,1)]*=r,Mt[pt(0,2)]*=r,Mt[pt(1,0)]*=h,Mt[pt(1,1)]*=h,Mt[pt(1,2)]*=h,Mt[pt(2,0)]=Mt[pt(1,0)],Mt[pt(2,1)]=Mt[pt(1,1)],Mt[pt(2,2)]=Mt[pt(1,2)],Mt[pt(1,2)]+=1,r=p(bt(Mt,1),s)+Mt[pt(1,2)],h=p(bt(Mt,2),s)+Mt[pt(2,2)],o=p(bt(Mt,1),e)+Mt[pt(1,2)],n=p(bt(Mt,2),e)+Mt[pt(2,2)],r=-.5*(r/h+o/n),Mt[pt(1,0)]+=Mt[pt(2,0)]*r,Mt[pt(1,1)]+=Mt[pt(2,1)]*r,Mt[pt(1,2)]+=Mt[pt(2,2)]*r,r=p(bt(Mt,1),s)+Mt[pt(1,2)],h=p(bt(Mt,2),s)+Mt[pt(2,2)],o=-h/r,Mt[pt(1,0)]*=o,Mt[pt(1,1)]*=o,Mt[pt(1,2)]*=o,a[0]=Mt[0],a[1]=Mt[1],a[2]=0,a[3]=Mt[2],a[4]=Mt[3],a[5]=Mt[4],a[6]=0,a[7]=Mt[5],a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=Mt[6],a[13]=Mt[7],a[14]=0,a[15]=Mt[8]}function jt(t,s,i,a,r){const h=1/K[0][3],o=1/K[4][3];V(h<o);let n=h+Math.sqrt(h*o);const c=Math.sin(e(t[2]*s[0]+t[6]*s[1]+t[10]*s[2]));n/=c,gt(K,n,c,Y,Z,$,tt,st),Ct(Y,Z,tt,st,r.projectionMatrix),r.projectionMatrix[10]=2/(i-a),r.projectionMatrix[14]=-(i+a)/(i-a)}function Tt(t){let{near:s,far:e}=t;return s<2&&(s=2),e<2&&(e=2),s>=e&&(s=2,e=4),{near:s,far:e}}export{X as ShadowMap,P as SnapshotSlot};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{a as e}from\"../../../../chunks/TextureOnly.glsl.js\";import{ReloadableShaderModule as r}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as o}from\"../core/shaderTechnique/ShaderTechnique.js\";import{makePipelineState as i,premultipliedAlphaToPremultipliedAlpha as l,defaultColorWrite as s}from\"../../../webgl/renderState.js\";class t extends o{constructor(o,i){super(o,i,new r(e,(()=>import(\"../core/shaderLibrary/util/TextureOnly.glsl.js\"))))}initializePipeline(e){return e.hasAlpha?i({blending:l,colorWrite:s}):i({colorWrite:s})}}export{t as TextureTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../../../chunks/tslib.es6.js\";import{ShaderTechniqueConfiguration as e,parameter as o}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";class r extends e{constructor(){super(...arguments),this.hasAlpha=!1}}s([o()],r.prototype,\"hasAlpha\",void 0);export{r as TextureTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{OverlayIndex as e}from\"../views/3d/terrain/interfaces.js\";import{ScreenSpacePass as r}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{FloatPassUniform as o}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as s}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{IntegerPassUniform as a}from\"../views/3d/webgl-engine/core/shaderModules/IntegerPassUniform.js\";import{Texture2DPassUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{NoParameters as i}from\"../views/webgl/NoParameters.js\";import{ShaderBuilder as n}from\"../views/webgl/ShaderBuilder.js\";class d extends i{constructor(){super(...arguments),this.overlayIndex=e.INNER,this.opacity=1}}function l(){const e=new n;return e.include(r),e.fragment.uniforms.add(new t(\"tex\",(e=>e.texture))),e.fragment.uniforms.add(new a(\"overlayIdx\",(e=>e.overlayIndex))),e.fragment.uniforms.add(new o(\"opacity\",(e=>e.opacity))),e.fragment.main.add(s`vec2 overlayUV = overlayIdx == 0 ? vec2(uv.x * 0.5, uv.y) : vec2(uv.x * 0.5 + 0.5, uv.y);\nfragColor = texture(tex, overlayUV) * opacity;`),e}const m=Object.freeze(Object.defineProperty({__proto__:null,OverlayCompositingPassParameters:d,build:l},Symbol.toStringTag,{value:\"Module\"}));export{d as O,m as a,l as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../core/shaderTechnique/ShaderTechnique.js\";import{a as o}from\"../../../../chunks/OverlayCompositing.glsl.js\";class s extends r{constructor(r,s){super(r,s,new e(o,(()=>import(\"./OverlayCompositing.glsl.js\"))))}}export{s as OverlayCompositingTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Evented.js\";import\"../../../core/has.js\";import{someMap as t}from\"../../../core/MapUtils.js\";import{disposeMaybe as s}from\"../../../core/maybe.js\";import i from\"../../../core/PooledArray.js\";import{watch as n,syncAndInitial as o,on as a,initial as h}from\"../../../core/reactiveUtils.js\";import{someSet as l}from\"../../../core/SetUtils.js\";import{property as d}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as c}from\"../../../core/accessorSupport/decorators/subclass.js\";import{ortho as u,fromTranslation as p}from\"../../../core/libs/gl-matrix-2/math/mat4.js\";import{i as g}from\"../../../chunks/vec32.js\";import{ones as _}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{DrapeTargetType as m,DrapeSourceType as y,DrapedRenderGroup as f}from\"../layers/interfaces.js\";import{debugFlags as R}from\"../support/debugFlags.js\";import{OverlayIndex as b}from\"./interfaces.js\";import{Overlay as T}from\"./Overlay.js\";import{OverlayContent as w}from\"./OverlayContent.js\";import{OverlayRenderTargets as D}from\"./OverlayRenderTargets.js\";import v from\"../webgl/RenderCamera.js\";import{ShaderOutput as x}from\"../webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{OverlayMode as O}from\"../webgl-engine/core/shaderLibrary/terrain/Overlay.glsl.js\";import{T as S}from\"../../../chunks/TextureOnly.glsl.js\";import{SyncRenderPlugin as C}from\"../webgl-engine/effects/RenderPlugin.js\";import{trackHighlightOptions as E,renderHighlightBuffer as P}from\"../webgl-engine/effects/highlight/Highlight.js\";import{RenderRequestType as j}from\"../webgl-engine/lib/basicInterfaces.js\";import{GLMaterialRepository as A}from\"../webgl-engine/lib/GLMaterialRepository.js\";import{GridLocalOriginFactory as M}from\"../webgl-engine/lib/GridLocalOriginFactory.js\";import{RenderOccludedFlag as W}from\"../webgl-engine/lib/Material.js\";import{OITPass as I}from\"../webgl-engine/lib/OITPass.js\";import{OverlayRenderContext as q,defaultRenderOccludedMask as N}from\"../webgl-engine/lib/RenderContext.js\";import{RenderSlot as F}from\"../webgl-engine/lib/RenderSlot.js\";import{ShadowMap as L}from\"../webgl-engine/lib/ShadowMap.js\";import{TextureTechnique as V}from\"../webgl-engine/lib/TextureTechnique.js\";import{TextureTechniqueConfiguration as H}from\"../webgl-engine/lib/TextureTechniqueConfiguration.js\";import{Update as G}from\"../webgl-engine/lib/Update.js\";import{UpdatePolicy as k}from\"../webgl-engine/lib/UpdatePolicy.js\";import{AmbientLight as U}from\"../webgl-engine/lighting/Lightsources.js\";import{O as B}from\"../../../chunks/OverlayCompositing.glsl.js\";import{OverlayCompositingTechnique as z}from\"../webgl-engine/shaders/OverlayCompositingTechnique.js\";import{TaskPriority as Y,noBudget as X}from\"../../support/Scheduler.js\";import{FramebufferBit as K,TextureSamplingMode as J}from\"../../webgl/enums.js\";import{Texture as Q}from\"../../webgl/Texture.js\";import{TextureDescriptor as Z}from\"../../webgl/TextureDescriptor.js\";let $=class extends C{constructor(e){super(e),this._overlays=null,this._renderTargets=null,this._overlayParameters=new B,this.hasHighlights=!1,this._hasWater=!1,this._renderers=new Map,this._sortedDrapeSourceRenderersDirty=!1,this._sortedRenderers=new i,this._passParameters=new S,this._materials=null,this._screenToWorldRatio=1,this._localOriginFactory=null,this.unloadedMemory=0,this.ignoresMemoryFactor=!1,this._camera=new v,this.events=new r,this.longitudeCyclical=null,this.produces=new Map([[F.DRAPED_MATERIAL,e=>e!==x.Highlight||this.hasHighlights],[F.DRAPED_WATER,()=>this._hasWater]]),this._hasTargetWithoutRasterImage=!1,this._hasDrapedFeatureSource=!1,this._hasDrapedRasterSource=!1}initialize(){const e=this._view,r=e._stage,t=r.renderer.fboCache,{waterTextures:s,textures:i}=r.renderView;this._renderContext=new q(this._rctx,new L(t,e.state.viewingMode)),this.addHandles([n((()=>s.updating),(()=>this.events.emit(\"content-changed\")),o),n((()=>this.spatialReference),(e=>this._localOriginFactory=new M(e)),o),a((()=>e.allLayerViews),\"after-changes\",(()=>this._sortedDrapeSourceRenderersDirty=!0)),n((()=>E(e.state.highlights)),(()=>this._sortedDrapeSourceRenderersDirty=!0),h),n((()=>e.state.highlights),(r=>{this._bindParameters.highlights=r,this._bindParameters.highlightOrderMap=e.state.highlightOrderMap,this._updateHighlights()}),h),e.resourceController.scheduler.registerTask(Y.STAGE,this)]),this._materials=new A(i,this._techniques,(()=>{this.notifyChange(\"rendersOccludedDraped\"),this.events.emit(\"content-changed\"),this.notifyChange(\"updating\"),this.notifyChange(\"isEmpty\")}),(()=>this.events.emit(\"content-changed\")));const{_bindParameters:l,_camera:d}=this;d.near=1,d.far=1e4,d.relativeElevation=null,l.slot=F.DRAPED_MATERIAL,l.mainDepth=null,l.camera=d,l.oitPass=I.NONE,l.updateLighting([new U(_())],0,0,G.Immediate)}destroy(){this._renderers.forEach((e=>e.destroy())),this._renderers.clear(),this._passParameters.texture=s(this._passParameters.texture),this.disposeOverlays()}get _bindParameters(){return this._renderContext.bind}get _rctx(){return this._stage.renderView.renderingContext}get _view(){return this.parent.view}get _stage(){return this.parent.view._stage}get spatialReference(){return this.parent.spatialReference}get _techniques(){return this._stage.renderView.techniques}get rctx(){return this._rctx}get materials(){return this._materials}get screenToWorldRatio(){return this._screenToWorldRatio}get localOriginFactory(){return this._localOriginFactory}get pluginContext(){return this._pluginContext}initializeRenderContext(e){this._pluginContext=e,this._techniques.precompile(z)}uninitializeRenderContext(){}acquireTechniques(){return[]}render(){}get updating(){return this._sortedDrapeSourceRenderersDirty||t(this._renderers,(e=>e.updating))}get hasOverlays(){return null!=this._overlays&&null!=this._renderTargets}getMaterialRenderer(e){for(const r of this._renderers.values()){const t=r.getMaterialRenderer(e);if(t)return t}return null}get layers(){return this._sortedDrapeSourceRenderersDirty&&this._updateSortedDrapeSourceRenderers(),this._sortedRenderers.map((e=>e.drapeSource.layer)).filter((e=>!!e))}_updateHighlights(){const e=this._view.state;this._renderers.forEach((r=>r.updateHighlights(e.highlightOrderMap)))}createDrapeSourceRenderer(e,r,t){const s=this._renderers.get(e);null!=s&&s.destroy();const i=new r({...t,rendererContext:this,drapeSource:e});return this._renderers.set(e,i),this._sortedDrapeSourceRenderersDirty=!0,\"fullOpacity\"in e&&this.addHandles(n((()=>e.fullOpacity),(()=>this.events.emit(\"content-changed\"))),e),i}removeDrapeSourceRenderer(e){if(null==e)return;const r=this._renderers.get(e);null!=r&&(this._sortedDrapeSourceRenderersDirty=!0,this._renderers.delete(e),this.removeHandles(e),r.destroy())}computeValidity(){return this._renderTargets?.computeValidity()??0}releaseRenderTargets(){this._renderTargets?.dispose()}get overlays(){return this._overlays??[]}ensureDrapeTargets(e){this._hasTargetWithoutRasterImage=!!this._overlays&&l(e,(e=>e.drapeTargetType===m.WithoutRasterImage))}ensureDrapeSources(e){this._overlays?(this._hasDrapedFeatureSource=l(e,(e=>e.drapeSourceType===y.Features)),this._hasDrapedRasterSource=l(e,(e=>e.drapeSourceType===y.RasterImage))):this._hasDrapedFeatureSource=this._hasDrapedRasterSource=!1}get _needsColorWithoutRasterImage(){return this._hasDrapedRasterSource&&this._hasDrapedFeatureSource&&this._hasTargetWithoutRasterImage}ensureOverlays(e,r,t=this._bindParameters.overlayStretch){null==this._overlays&&(this._renderTargets=new D(this._stage.renderer.fboCache),this._overlays=[new T,new T]),this.ensureDrapeTargets(e),this.ensureDrapeSources(r),this._bindParameters.overlayStretch=t}disposeOverlays(){this._overlays=null,this._renderTargets=s(this._renderTargets),this.events.emit(\"textures-disposed\")}getTexture(e){if(null!=e)return e===w.ColorNoRasterImage&&!this._needsColorWithoutRasterImage&&this._hasDrapedFeatureSource?this._renderTargets?.getTexture(w.Color):this._renderTargets?.getTexture(e)}get running(){return this.updating}runTask(e){this._processDrapeSources(e,(()=>!0))}_processDrapeSources(e,r){let s=!1;for(const[t,i]of this._renderers){if(e.done)break;(t.destroyed||r(t))&&(i.commitChanges(this._view.state.highlightOrderMap)&&(s=!0,e.madeProgress()))}this._sortedDrapeSourceRenderersDirty&&(this._sortedDrapeSourceRenderersDirty=!1,s=!0,this._updateSortedDrapeSourceRenderers()),s&&(null!=this._overlays&&0===this._renderers.size&&this.disposeOverlays(),this.notifyChange(\"updating\"),this.notifyChange(\"isEmpty\"),this.events.emit(\"content-changed\"),this.hasHighlights=t(this._renderers,(e=>e.hasHighlights)),this.notifyChange(\"rendersOccludedDraped\"))}hasHighlightOptions(e){return t(this._renderers,(r=>r.hasHighlightOptions(e)))}processSyncDrapeSources(){this._processDrapeSources(X,(e=>e.updatePolicy===k.SYNC))}get isEmpty(){return!R.OVERLAY_DRAW_DEBUG_TEXTURE&&!t(this._renderers,(e=>!e.isEmpty))}get hasWater(){const e=t(this._renderers,(e=>e.hasWater));return e!==this._hasWater&&(this._hasWater=e,this.events.emit(\"has-water\")),this._hasWater}get rendersOccludedDraped(){const e=this._renderContext.renderOccludedMask;this._renderContext.renderOccludedMask=se,++this._techniques.precompiling;const r=this._sortedRenderers.some((({renderer:e})=>e.precompile(this._renderContext)));return--this._techniques.precompiling,this._renderContext.renderOccludedMask=e,r}renders(e){if(R.OVERLAY_DRAW_DEBUG_TEXTURE&&e!==w.Occluded&&e!==w.Highlight)return!0;++this._techniques.precompiling;const r=this._sortedRenderers.some((({renderer:e})=>e.precompile(this._renderContext)));return--this._techniques.precompiling,r}get mode(){return this.isEmpty?O.Disabled:this.hasWater&&this.renders(w.WaterNormal)?O.EnabledWithWater:this._renderTargets?.getTexture(w.Color)?O.Enabled:O.Disabled}updateAnimation(e){let r=!1;return this._renderers.forEach((t=>r=t.updateAnimation(e)||r)),r&&this.parent.requestRender(j.BACKGROUND),r}updateDrapeSourceOrder(){this._sortedDrapeSourceRenderersDirty=!0}precompileShaders(e){if(this._renderTargets){this._bindParameters.alignPixelEnabled=e.alignPixelEnabled,++this._techniques.precompiling;for(const e of this._renderTargets.targets){if(e.content===w.ColorNoRasterImage&&!this._needsColorWithoutRasterImage)continue;const r=e.output;this._renderContext.output=r,this._bindParameters.slot=r===x.Normal?F.DRAPED_WATER:F.DRAPED_MATERIAL,e.content===w.Occluded&&(this._renderContext.renderOccludedMask=se),this._sortedRenderers.forAll((({drapeSource:r,renderer:t})=>{e.content===w.ColorNoRasterImage&&r.drapeSourceType===y.RasterImage||t.precompile(this._renderContext)})),this._renderContext.renderOccludedMask=N}--this._techniques.precompiling}}drawOverlays(e){if(this._overlays&&this._renderTargets){for(const e of this._overlays)this.longitudeCyclical?e.setupGeometryViewsCyclical(this.longitudeCyclical):e.setupGeometryView();this._bindParameters.alignPixelEnabled=e.alignPixelEnabled;for(const e of this._renderTargets.targets){if(e.content===w.ColorNoRasterImage&&!this._needsColorWithoutRasterImage)continue;const r=this._drawTarget(b.INNER,e),t=this._drawTarget(b.OUTER,e);(r||t)&&e.fbo.generateMipMap()}}}_drawTarget(e,r){const t=this._overlays[e],s=t.canvasGeometries;if(0===s.numViews)return!1;const i=this._view.state.contentPixelRatio;this._screenToWorldRatio=i*t.mapUnitsPerPixel/this._bindParameters.overlayStretch;const n=r.output;if(this.isEmpty||n===x.Normal&&!this.hasWater||!t.hasSomeSizedView())return!1;const{_rctx:o,_camera:a,_renderContext:h,_bindParameters:l}=this;if(a.pixelRatio=t.pixelRatio*i,h.output=n,l.screenToWorldRatio=this._screenToWorldRatio,l.screenToPCSRatio=this._screenToWorldRatio*this.parent.worldToPCSRatio,l.slot=n===x.Normal?F.DRAPED_WATER:F.DRAPED_MATERIAL,r.content===w.Occluded&&(h.renderOccludedMask=se),!this.renders(r.content))return h.renderOccludedMask=N,!1;const{resolution:d}=t,c=e===b.INNER?0:d;o.setViewport(c,0,d,d),this._bindTargetFBO(r),e===b.INNER&&(o.setClearColor(0,0,0,0),o.clear(K.COLOR));if(R.OVERLAY_DRAW_DEBUG_TEXTURE&&r.content!==w.Occluded&&r.content!==w.Highlight){this._techniques.precompile(V,ie);const r=this._techniques.get(V,ie);for(let i=0;i<s.numViews;i++)this._setViewParameters(s.extents[i],t),this._ensureDebugPatternResources(t.resolution,re[e]),o.bindTechnique(r,l,this._passParameters),o.screen.draw()}if(r.output===x.Highlight){const{fboCache:t}=this._stage.renderer,s=this._resolution;this._bindTargetFBO(r),P(o,t,{width:s,height:s},l,(()=>this._renderAllGeometry(e,r)),c)}else this._renderAllGeometry(e,r);return o.bindFramebuffer(null),h.renderOccludedMask=N,!0}_renderAllGeometry(e,r){const t=this._overlays[e],s=t.canvasGeometries;this._sortedRenderers.forAll((({drapeSource:i,renderer:n})=>{if(r.content===w.ColorNoRasterImage&&i.drapeSourceType===y.RasterImage)return;const{fullOpacity:o}=i,a=null!=o&&o<1&&r.output===x.Color&&this._bindTemporaryFBO();for(let e=0;e<s.numViews;e++)this._setViewParameters(s.extents[e],t),n.render(this._renderContext);if(a){this._bindTargetFBO(r),this._overlayParameters.texture=a.getTexture(),this._overlayParameters.opacity=o,this._overlayParameters.overlayIndex=e;const t=this._techniques.get(z);this._rctx.bindTechnique(t,this._bindParameters,this._overlayParameters),this._rctx.screen.draw(),a.release()}}))}_bindTargetFBO(e){const r=this._resolution,t=2*r;e.fbo.bind(this._rctx,t,r)}_bindTemporaryFBO(){const e=this._resolution,r=2*e,t=this._stage.renderer.fboCache,s=t.acquire(r,e,\"overlay tmp\");return t.rctx.bindFramebuffer(s.fbo),t.rctx.clear(K.COLOR),s}get _resolution(){return this._overlays?.[b.INNER].resolution??0}notifyContentChanged(){this.events.emit(\"content-changed\")}intersect(e,r,t,s){this._sortedDrapeSourceRenderersDirty&&this._updateSortedDrapeSourceRenderers();let i=0;for(const{renderer:n}of this._sortedRenderers)i=n.intersect?.(e,r,t,s,i)??i}_updateSortedDrapeSourceRenderers(){if(this._sortedRenderers.clear(),0===this._renderers.size)return;const e=this._view.map.allLayers,r=e.length;this._renderers.forEach(((t,s)=>{const i=e.indexOf(s.layer),n=i>=0,o=s.renderGroup??(n?f.MapLayer:f.ViewLayer),a=r*o+(n?i:0);this._sortedRenderers.push(new ee(s,t,a))})),this._sortedRenderers.sort(((e,r)=>e.index-r.index))}_setViewParameters(e,r){const t=this._camera;t.viewport=[0,0,r.resolution,r.resolution],u(t.projectionMatrix,0,e[2]-e[0],0,e[3]-e[1],t.near,t.far),p(t.viewMatrix,[-e[0],-e[1],0])}_ensureDebugPatternResources(e,r){if(g(this._passParameters.color,r[0],r[1],r[2]),this._passParameters.texture)return;const t=new Uint8Array(e*e*4);let s=0;for(let n=0;n<e;n++)for(let r=0;r<e;r++){const i=Math.floor(r/10),o=Math.floor(n/10);i<2||o<2||10*i>e-20||10*o>e-20?(t[s++]=255,t[s++]=255,t[s++]=255,t[s++]=255):(t[s++]=255,t[s++]=255,t[s++]=255,t[s++]=1&i&&1&o?1&r^1&n?0:255:1&i^1&o?0:128)}const i=new Z(e);i.samplingMode=J.NEAREST,this._passParameters.texture=new Q(this._rctx,i,t)}get test(){}};e([d()],$.prototype,\"hasHighlights\",void 0),e([d()],$.prototype,\"_sortedDrapeSourceRenderersDirty\",void 0),e([d({constructOnly:!0})],$.prototype,\"parent\",void 0),e([d({readOnly:!0})],$.prototype,\"_techniques\",null),e([d({type:Boolean,readOnly:!0})],$.prototype,\"updating\",null),e([d()],$.prototype,\"isEmpty\",null),e([d({readOnly:!0})],$.prototype,\"rendersOccludedDraped\",null),$=e([c(\"esri.views.3d.terrain.OverlayRenderer\")],$);class ee{constructor(e,r,t){this.drapeSource=e,this.renderer=r,this.index=t}}const re=[[1,.5,.5],[.5,.5,1]],te=-2,se=W.OccludeAndTransparent,ie=new H;ie.hasAlpha=!0;export{$ as OverlayRenderer,te as drapedZ,se as overlayRenderOccludedFlag};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{generateUID as t}from\"../../../../core/uid.js\";import{copy as r,multiply as i}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as e}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{t as s}from\"../../../../chunks/vec32.js\";import{N as o,c as n,a as h}from\"../../../../chunks/sphere.js\";import{maxScale as a}from\"../../support/mathUtils.js\";class g{constructor(r,i={}){this.geometry=r,this.screenToWorldRatio=1,this._transformation=e(),this._shaderTransformation=null,this._boundingSphere=null,this.id=t(),this.layerUid=i.layerUid,this.graphicUid=i.graphicUid,this.castShadow=i.castShadow??!1,i.objectShaderTransformation&&this.objectShaderTransformationChanged(i.objectShaderTransformation)}get transformation(){return this._transformation}set transformation(t){r(this._transformation,t),this._boundingSphere=null}get boundingInfo(){return this.geometry.boundingInfo}objectShaderTransformationChanged(t){null==t?this._shaderTransformation=null:(this._shaderTransformation??=e(),i(this._shaderTransformation,t,this.geometry.transformation)),this._boundingSphere=null}get boundingSphere(){return this.boundingInfo?(null==this._boundingSphere&&(this._boundingSphere??=n(),s(h(this._boundingSphere),this.boundingInfo.center,this.shaderTransformation),this._boundingSphere[3]=this.boundingInfo.radius*a(this.shaderTransformation)),this._boundingSphere):o}get material(){return this.geometry.material}get type(){return this.geometry.type}get shaderTransformation(){return this._shaderTransformation??this.transformation}get attributes(){return this.geometry.attributes}get highlight(){return this.geometry.highlights}foreachHighlightOptions(t){this.geometry.foreachHighlightOptions(t)}get hasHighlights(){return this.geometry.hasHighlights}get occludees(){return this.geometry.occludees}get visible(){return this.geometry.visible}set visible(t){this.geometry.visible=t}}class m extends g{}export{g as RenderGeometry,m as ValidatedRenderGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{Material as r}from\"../lib/Material.js\";import{intersectTriangleGeometry as t}from\"../lib/RayIntersections.js\";class e extends r{intersect(r,e,i,s,o,n){return t(r,i,s,o,void 0,n)}}export{e as TriangleMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{SliceDraw as e}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ObjectAndLayerIdColor as o}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js\";import{VertexColor as i}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";import{terrainDepthTest as l}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js\";import{VisualVariables as s}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js\";import{ColorConversion as t}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{addProjViewLocalOrigin as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float4PassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{glsl as a}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{VertexAttribute as g}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";import{outputColorHighlightOID as v}from\"../views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl.js\";import{ShaderBuilder as b}from\"../views/webgl/ShaderBuilder.js\";function c(c){const m=new b,{vertex:u,fragment:w,attributes:p,varyings:f}=m,{vvColor:h,hasVertexColors:C}=c;return d(u,c),m.include(r,c),m.include(i,c),m.include(s,c),m.include(o,c),w.include(e,c),m.include(v,c),m.include(l,c),p.add(g.POSITION,\"vec3\"),h&&p.add(g.COLORFEATUREATTRIBUTE,\"float\"),C||f.add(\"vColor\",\"vec4\"),f.add(\"vpos\",\"vec3\"),u.uniforms.add(new n(\"uColor\",(e=>e.color))),u.main.add(a`\n      vpos = position;\n      forwardNormalizedVertexColor();\n      forwardObjectAndLayerIdColor();\n\n      ${C?\"vColor *= uColor;\":h?\"vColor = uColor * interpolateVVColor(colorFeatureAttribute);\":\"vColor = uColor;\"}\n      forwardViewPosDepth((view * vec4(vpos, 1.0)).xyz);\n      gl_Position = transformPosition(proj, view, vpos);`),w.include(t),w.main.add(a`discardBySlice(vpos);\ndiscardByTerrainDepth();\noutputColorHighlightOID(vColor, vpos);`),m}const m=Object.freeze(Object.defineProperty({__proto__:null,build:c},Symbol.toStringTag,{value:\"Module\"}));export{m as C,c as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ZEROS as e}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{isColorOrColorEmission as r,ShaderOutput as t}from\"../core/shaderLibrary/ShaderOutput.js\";import{ReloadableShaderModule as s}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as i}from\"../core/shaderTechnique/ShaderTechnique.js\";import{OITPass as l}from\"../lib/OITPass.js\";import{blending as o,oitDepthTest as n,depthWrite as a,getDrawBuffers as c,getOITPolygonOffset as p}from\"../lib/OrderIndependentTransparency.js\";import{stencilWriteMaskOn as u,stencilToolMaskBaseParams as m,stencilBaseAllZerosParams as f}from\"../lib/StencilUtils.js\";import{VisualVariablePassParameters as d}from\"../materials/VisualVariablePassParameters.js\";import{C as h}from\"../../../../chunks/ColorMaterial.glsl.js\";import{SpecialDrawBuffers as b}from\"../../../webgl/enums.js\";import{makePipelineState as j,cullingParams as P,defaultColorWrite as g}from\"../../../webgl/renderState.js\";class O extends d{constructor(){super(...arguments),this.color=e}}class S extends i{constructor(e,r){super(e,r,new s(h,(()=>import(\"./ColorMaterial.glsl.js\"))))}_createPipeline(e,s){const{oitPass:i,output:d,transparent:h,cullFace:O,draped:S,hasOccludees:_,polygonOffset:w,enableOffset:x}=e,y=i===l.NONE,N=i===l.FrontFace;return j({blending:r(d)&&h?o(i):null,culling:P(O),depthTest:S?null:{func:n(i)},depthWrite:a(e),drawBuffers:d===t.Depth?{buffers:[b.NONE]}:c(i,d),colorWrite:g,stencilWrite:_?u:null,stencilTest:_?s?m:f:null,polygonOffset:y||N?w?T:null:p(x)})}initializePipeline(e){return this._occludeePipelineState=this._createPipeline(e,!0),this._createPipeline(e,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}const T={factor:1,units:1};export{O as ColorMaterialPassParameters,S as ColorMaterialTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{TextureCoordinateType as e}from\"../core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{EmissionSource as o}from\"../core/shaderLibrary/output/Emissions.glsl.js\";import{parameter as r}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{CullFaceOptions as s}from\"../lib/basicInterfaces.js\";import{DefaultTechniqueConfiguration as i}from\"../materials/DefaultTechniqueConfiguration.js\";class a extends i{constructor(){super(...arguments),this.cullFace=s.None,this.hasVertexColors=!1,this.transparent=!1,this.discardInvisibleFragments=!1,this.polygonOffset=!1,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.objectAndLayerIdColorInstanced=!1,this.vvColor=!1,this.draped=!1,this.textureCoordinateType=e.None,this.emissionSource=o.None,this.occlusionPass=!1,this.hasVvInstancing=!0,this.vvSize=!1,this.vvOpacity=!1}}t([r({count:s.COUNT})],a.prototype,\"cullFace\",void 0),t([r()],a.prototype,\"hasVertexColors\",void 0),t([r()],a.prototype,\"transparent\",void 0),t([r()],a.prototype,\"discardInvisibleFragments\",void 0),t([r()],a.prototype,\"polygonOffset\",void 0),t([r()],a.prototype,\"enableOffset\",void 0),t([r()],a.prototype,\"writeDepth\",void 0),t([r()],a.prototype,\"hasOccludees\",void 0),t([r()],a.prototype,\"terrainDepthTest\",void 0),t([r()],a.prototype,\"cullAboveTerrain\",void 0),t([r()],a.prototype,\"objectAndLayerIdColorInstanced\",void 0),t([r()],a.prototype,\"vvColor\",void 0),t([r()],a.prototype,\"draped\",void 0);export{a as ColorMaterialTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ZEROS as t}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{newLayout as r}from\"../../support/buffer/InterleavedLayout.js\";import{isColorOrColorEmissionOrOID as e,isDepth as s,is2DGeometryOutput as i,isColorOrColorEmission as a,ShaderOutput as o}from\"../core/shaderLibrary/ShaderOutput.js\";import{olidEnabled as n}from\"../effects/geometry/olidUtils.js\";import{CullFaceOptions as h}from\"../lib/basicInterfaces.js\";import p from\"../lib/GLMaterial.js\";import{OITPolygonOffsetLimit as l}from\"../lib/OrderIndependentTransparency.js\";import{RenderSlot as u}from\"../lib/RenderSlot.js\";import{VertexAttribute as c}from\"../lib/VertexAttribute.js\";import{DefaultBufferWriter as f}from\"./DefaultBufferWriter.js\";import{TriangleMaterial as m}from\"./TriangleMaterial.js\";import{VisualVariablePassParameters as _}from\"./VisualVariablePassParameters.js\";import{ColorMaterialTechnique as g}from\"../shaders/ColorMaterialTechnique.js\";import{ColorMaterialTechniqueConfiguration as T}from\"../shaders/ColorMaterialTechniqueConfiguration.js\";import{alphaCutoff as O}from\"../../../../webscene/support/AlphaCutoff.js\";class A extends m{constructor(t){super(t,P),this._configuration=new T,this.supportsEdges=!0,this.produces=new Map([[u.OPAQUE_MATERIAL,t=>this._isOpaqueMaterialPass(t)],[u.OPAQUE_MATERIAL_WITHOUT_NORMALS,t=>this._isOpaqueNoSSAODepthPass(t)],[u.TRANSPARENT_MATERIAL,t=>e(t)&&this._transparent&&this.parameters.writeDepth],[u.TRANSPARENT_MATERIAL_WITHOUT_NORMALS,t=>s(t)&&this._transparent&&this.parameters.writeDepth],[u.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,t=>e(t)&&this._transparent&&!this.parameters.writeDepth],[u.DRAPED_MATERIAL,t=>i(t)]])}getConfiguration(t,r){return this._configuration.output=t,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasVertexColors=this.parameters.hasVertexColors&&!this.parameters.vvColor,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this._transparent,this._configuration.discardInvisibleFragments=this._transparent&&!this._isOpaquePass(t)&&this.parameters.discardInvisibleFragments,this._configuration.polygonOffset=this.parameters.polygonOffset,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=r.hasOccludees,this._configuration.oitPass=r.oitPass,this._configuration.enableOffset=r.camera.relativeElevation<l,this._configuration.terrainDepthTest=r.terrainDepthTest&&a(t),this._configuration.cullAboveTerrain=r.cullAboveTerrain,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.draped=this.parameters.draped,this._configuration}get visible(){return this.parameters.color[3]>=O}get _transparent(){return this.parameters.color[3]<1||this.parameters.forceTransparentMode}_isOpaquePass(t){return this._isOpaqueMaterialPass(t)||this._isOpaqueNoSSAODepthPass(t)}_isOpaqueMaterialPass(t){return t===o.Highlight||e(t)&&!this._transparent}_isOpaqueNoSSAODepthPass(t){return s(t)&&this.parameters.writeDepth&&!this._transparent}createGLMaterial(t){return new d(t)}createBufferWriter(){const t=r().vec3f(c.POSITION);return n()&&t.vec4u8(c.OBJECTANDLAYERIDCOLOR),this.parameters.vvColor?t.f32(c.COLORFEATUREATTRIBUTE):t.vec4u8(c.COLOR),new f(t)}}class d extends p{beginSlot(t){return this.getTechnique(g,t)}}class P extends _{constructor(){super(...arguments),this.color=t,this.forceTransparentMode=!1,this.writeDepth=!0,this.hasVertexColors=!1,this.polygonOffset=!1,this.hasSlicePlane=!1,this.cullFace=h.None,this.draped=!1,this.discardInvisibleFragments=!1}}export{A as ColorMaterial,P as Parameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nvar a;!function(a){a[a.EnableFastUpdates=0]=\"EnableFastUpdates\",a[a.DisableFastUpdates=1]=\"DisableFastUpdates\",a[a.UpdateFastLocalOrigin=2]=\"UpdateFastLocalOrigin\"}(a||(a={}));export{a as MeshTransformUpdateAction};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nconst t={dash:[4,3],dot:[1,3],\"long-dash\":[8,3],\"short-dash\":[4,1],\"short-dot\":[1,1]},o={dash:t.dash,\"dash-dot\":[...t.dash,...t.dot],dot:t.dot,\"long-dash\":t[\"long-dash\"],\"long-dash-dot\":[...t[\"long-dash\"],...t.dot],\"long-dash-dot-dot\":[...t[\"long-dash\"],...t.dot,...t.dot],none:null,\"short-dash\":t[\"short-dash\"],\"short-dash-dot\":[...t[\"short-dash\"],...t[\"short-dot\"]],\"short-dash-dot-dot\":[...t[\"short-dash\"],...t[\"short-dot\"],...t[\"short-dot\"]],\"short-dot\":t[\"short-dot\"],solid:null},d=8;function s(t,o){return null==t?t:{pattern:t.slice(),pixelRatio:o}}function h(t){return{pattern:[t,t],pixelRatio:2}}function n(t){return\"style\"===t?.type?l(t.style):null}function l(t){return null!=t?s(o[t],d):null}export{h as createStipplePatternSimple,n as getStipplePatternForLinePattern,l as getStipplePatternForPatternStyle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{set as t,dist as e}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as r}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{ONES as o}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{getReferenceEllipsoid as n}from\"../../../../geometry/ellipsoidUtils.js\";import{lonLatToWebMercatorComparable as i}from\"../../../../geometry/projection/projectors.js\";import{newDoubleArray as a}from\"../../../../geometry/support/DoubleArray.js\";import{newFloatArray as l}from\"../../../../geometry/support/FloatArray.js\";import{getZeroIndexArray as u}from\"../../../../geometry/support/Indices.js\";import{ViewingMode as s}from\"../../../ViewingMode.js\";import{Attribute as c}from\"../../webgl-engine/lib/Attribute.js\";import{ContentObjectType as p}from\"../../webgl-engine/lib/ContentObjectType.js\";import{Geometry as f}from\"../../webgl-engine/lib/Geometry.js\";import{VertexAttribute as m}from\"../../webgl-engine/lib/VertexAttribute.js\";function b(t,e,r=null){const o=[],n=e.mapPositions;g(e,o);const i=o[0][1].data,a=o[0][1].indices.length,l=u(a);return h(e,o,l),j(e,o,l),T(e,o,l),D(e,o,l),w(e,o,l),y(e,o,l),E(e,o,i),new f(t,o,n,p.Line,r)}function g(t,e){const{attributeData:{position:r},removeDuplicateStartEnd:o}=t,n=A(r)&&o,i=r.length/3-(n?1:0),a=new Array(2*(i-1)),l=n?r.slice(0,-3):r;let u=0;for(let s=0;s<i-1;s++)a[u++]=s,a[u++]=s+1;e.push([m.POSITION,new c(l,a,3,n)])}function h(t,e,r){if(null!=t.attributeData.colorFeature)return;const n=t.attributeData.color;e.push([m.COLOR,new c(n??o,r,4)])}function T(t,e,r){t.attributeData.normal&&e.push([m.NORMAL,new c(t.attributeData.normal,r,3)])}function D(t,e,r){null!=t.attributeData.colorFeature&&e.push([m.COLORFEATUREATTRIBUTE,new c([t.attributeData.colorFeature],r,1,!0)])}function j(t,e,r){null==t.attributeData.sizeFeature&&e.push([m.SIZE,new c([t.attributeData.size??1],r,1,!0)])}function w(t,e,r){null!=t.attributeData.sizeFeature&&e.push([m.SIZEFEATUREATTRIBUTE,new c([t.attributeData.sizeFeature],r,1,!0)])}function y(t,e,r){null!=t.attributeData.opacityFeature&&e.push([m.OPACITYFEATUREATTRIBUTE,new c([t.attributeData.opacityFeature],r,1,!0)])}function E(r,o,u){if(null==r.overlayInfo||r.overlayInfo.renderCoordsHelper.viewingMode!==s.Global||!r.overlayInfo.spatialReference.isGeographic)return;const p=a(u.length),f=n(r.overlayInfo.spatialReference);for(let t=0;t<p.length;t+=3)i(u,t,p,t,f);const b=u.length/3,g=l(b+1);let h=I,T=F,D=0,j=0;t(h,p[j++],p[j++]),j++,g[0]=0;for(let n=1;n<b+1;++n)n===b&&(j=0),t(T,p[j++],p[j++]),j++,D+=e(h,T),g[n]=D,[h,T]=[T,h];o.push([m.DISTANCETOSTART,new c(g,o[0][1].indices,1,!0)])}function A(t){const e=t.length;return t[0]===t[e-3]&&t[1]===t[e-2]&&t[2]===t[e-1]}const I=r(),F=r();function R(t,e){if(null==t||0===t.length)return[];const r=[];return t.forEach((t=>{const o=t.length,n=a(3*o);t.forEach(((t,e)=>{n[3*e]=t[0],n[3*e+1]=t[1],n[3*e+2]=t[2]}));const i={attributeData:{position:n,normal:e},removeDuplicateStartEnd:!1};r.push(i)})),r}export{b as createGeometry,R as lineStripsToParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{projectBuffer as o}from\"../../../../geometry/projection/projectBuffer.js\";import{newDoubleArray as e,doubleSubArray as t}from\"../../../../geometry/support/DoubleArray.js\";import{CounterClockwiseMode as n,ringsToTriangulationInfo as r}from\"../../../../geometry/support/triangulationUtils.js\";import{applyPerVertexElevationAlignment as i}from\"../../layers/graphics/elevationAlignmentUtils.js\";import{drapedZ as s}from\"../../terrain/OverlayRenderer.js\";function p(o,t,s,p){const l=\"polygon\"===o.type?n.CCW_IS_HOLE:n.NONE,a=\"polygon\"===o.type?o.rings:o.paths,{position:u,outlines:f}=r(a,!!o.hasZ,l,o.spatialReference),m=e(u.length),g=i(u,o.spatialReference,0,m,0,u,0,u.length/3,t,s,p),y=null!=g;return{lines:y?c(f,u,m):[],projectionSuccess:y,sampledElevation:g}}function l(e,t){const i=\"polygon\"===e.type?n.CCW_IS_HOLE:n.NONE,p=\"polygon\"===e.type?e.rings:e.paths,{position:l,outlines:a}=r(p,!1,i),u=o(l,e.spatialReference,0,l,t,0);for(let o=2;o<l.length;o+=3)l[o]=s;return{lines:u?c(a,l):[],projectionSuccess:u}}function c(o,e,n=null){const r=new Array;for(const{index:i,count:s}of o){if(s<=1)continue;const o=3*i,p=3*s;r.push({position:t(e,3*i,3*s),mapPositions:null!=n?t(n,o,p):void 0})}return r}export{p as geometryToRenderInfo,l as geometryToRenderInfoDraped};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{newLayout as e}from\"../../support/buffer/InterleavedLayout.js\";import{VertexAttribute as O}from\"../lib/VertexAttribute.js\";const t=e().vec3f(O.POSITION),f=e().vec3f(O.POSITION).vec2f(O.UV0),r=e().vec3f(O.POSITION).vec4u8(O.COLOR),I=e().vec3f(O.POSITION).vec2f(O.UV0).vec4u8(O.OBJECTANDLAYERIDCOLOR);export{r as PositionColorLayout,t as PositionLayout,f as PositionUVLayout,I as PositionUVLayoutObjectAndLayerId};\n"],"names":["E","I","A","O","n$6","e","i","r","s","t","r$3","o","t$5","h","l","i$3","a","n","d","c","p","x","m","_","H","P","w","D","S","f","C","v","g","O$1","u","F","o$6","a$6","e$3","l$4","e$2","l$3","n$1","s$3","j","M","y","q","U","T","b","R","G","L","V","s$2","a$3","c$2","a$2","X","has","it","Tt","at","rt","z","W","Q","J","K","et","k","jt","N","yt","Y","Z","$","tt","st","ht","ot","nt","ct","lt","dt","mt","ut","_t","ft","gt","B","pt","xt","bt","wt","Mt","Ct","t$2","r$1","s$1","se","ie","re","ee","te","g$1","a$1","A$1","d$1"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55]}