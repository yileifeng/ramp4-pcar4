import{b4 as R,o as c,b6 as b,cU as g,cV as v,M as W}from"./main-BC8gbEPx.js";import{e as C}from"./projectVectorToVector-B5ubG6d0.js";function m(e){return"declaredClass"in e}function f(e){return"declaredClass"in e}function A(e){return"declaredClass"in e}function J(e,s){return e?A(e)?e:new R({layer:s,sourceLayer:s,visible:e.visible,symbol:c(e.symbol),attributes:c(e.attributes),geometry:h(e.geometry)}):null}function h(e){return e==null?null:m(e)?e:b(L(e))}function L(e){const{wkid:s,wkt:n,wkt2:o,latestWkid:l}=e.spatialReference,t={wkid:s,wkt:n,wkt2:o,latestWkid:l};switch(e.type){case"point":{const{x:a,y:r,z:i,m:u}=e;return{x:a,y:r,z:i,m:u,spatialReference:t}}case"polygon":{const{rings:a,hasZ:r,hasM:i}=e;return{rings:p(a),hasZ:r,hasM:i,spatialReference:t}}case"polyline":{const{paths:a,hasZ:r,hasM:i}=e;return{paths:p(a),hasZ:r,hasM:i,spatialReference:t}}case"extent":{const{xmin:a,xmax:r,ymin:i,ymax:u,zmin:d,zmax:k,mmin:w,mmax:M,hasZ:Z,hasM:z}=e;return{xmin:a,xmax:r,ymin:i,ymax:u,zmin:d,zmax:k,mmin:w,mmax:M,hasZ:Z,hasM:z,spatialReference:t}}case"multipoint":{const{points:a,hasZ:r,hasM:i}=e;return{points:y(a)?x(a):a,hasZ:r,hasM:i,spatialReference:t}}default:return}}function p(e){return S(e)?e.map(s=>x(s)):e}function x(e){return e.map(s=>Array.from(s))}function S(e){for(const s of e)if(s.length!==0)return y(s);return!1}function y(e){return e.length>0&&(g(e[0])||v(e[0]))}function U(e,s){if(!e)return null;let n;if(f(e)){if(s==null)return e.clone();if(f(s))return s.copy(e)}return s!=null?(n=s,n.x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=void 0,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=void 0,n.hasM=!1)):(n=C(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}function V(e){const{wkid:s,wkt:n,wkt2:o,latestWkid:l}=e,t={wkid:s,wkt:n,wkt2:o,latestWkid:l};return W.fromJSON(t)}export{J as c,V as k,m as o,h as u,U as x};
